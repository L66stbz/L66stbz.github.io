<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Tomcat运维实战 | L66</title><meta name="description" content="Tomcat 运维实战[TOC] 1、Java常识 JVM（Java虚拟机）： 是一个抽象的计算机器，它使计算机能够运行Java程序。它是Java运行环境（JRE）的关键部分。JVM将Java字节码转换为机器语言，使得Java程序可以在不同的平台上运行而无需修改。   JRE（Java运行环境）： JRE是一组软件工具，提供运行Java应用程序所需的环境。它包括JVM、类库和其他支持文件。当您在系"><meta name="keywords" content="Linux,tomcat"><meta name="author" content="L66"><meta name="copyright" content="L66"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/3.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Tomcat运维实战"><meta name="twitter:description" content="Tomcat 运维实战[TOC] 1、Java常识 JVM（Java虚拟机）： 是一个抽象的计算机器，它使计算机能够运行Java程序。它是Java运行环境（JRE）的关键部分。JVM将Java字节码转换为机器语言，使得Java程序可以在不同的平台上运行而无需修改。   JRE（Java运行环境）： JRE是一组软件工具，提供运行Java应用程序所需的环境。它包括JVM、类库和其他支持文件。当您在系"><meta name="twitter:image" content="https://l66stbz.github.io/2024/08/08/Tomcat运维实战/1.png"><meta property="og:type" content="article"><meta property="og:title" content="Tomcat运维实战"><meta property="og:url" content="https://l66stbz.github.io/2024/08/08/Tomcat%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/"><meta property="og:site_name" content="L66"><meta property="og:description" content="Tomcat 运维实战[TOC] 1、Java常识 JVM（Java虚拟机）： 是一个抽象的计算机器，它使计算机能够运行Java程序。它是Java运行环境（JRE）的关键部分。JVM将Java字节码转换为机器语言，使得Java程序可以在不同的平台上运行而无需修改。   JRE（Java运行环境）： JRE是一组软件工具，提供运行Java应用程序所需的环境。它包括JVM、类库和其他支持文件。当您在系"><meta property="og:image" content="https://l66stbz.github.io/2024/08/08/Tomcat运维实战/1.png"><meta property="article:published_time" content="2024-08-08T13:50:00.000Z"><meta property="article:modified_time" content="2024-08-23T08:00:32.255Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://l66stbz.github.io/2024/08/08/Tomcat%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/"><link rel="prev" title="nginx详解+实操_01" href="https://l66stbz.github.io/2024/08/09/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_01/"><link rel="next" title="Linux内核升级" href="https://l66stbz.github.io/2024/07/31/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/gh/radium-bit/res@master/live2d/autoload.js" async></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="L66" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/2.jpg" onerror="onerror=null;src='/img/2.jpg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">54</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">35</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Photo</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Tomcat-运维实战"><span class="toc-number">1.</span> <span class="toc-text">Tomcat 运维实战</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、Java常识"><span class="toc-number">1.1.</span> <span class="toc-text">1、Java常识</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-什么是JAVA虚拟机"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 什么是JAVA虚拟机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-JAVA-如何做到跨平台"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 JAVA 如何做到跨平台</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-常用虚拟机参数"><span class="toc-number">1.1.3.</span> <span class="toc-text">1.3 常用虚拟机参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#X-类型参数"><span class="toc-number">1.1.3.1.</span> <span class="toc-text">X  类型参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XX-类型参数"><span class="toc-number">1.1.3.2.</span> <span class="toc-text">XX  类型参数</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#在实际情况中-X-参数和-XX-参数并没有什么不同。X-参数的功能是十分稳定的。用一句话来说明-XX-参数的语法。所有的-XX-参数都以”-XX-”开始，但是随后的语法不同，取决于参数的类型："><span class="toc-number">2.</span> <span class="toc-text">在实际情况中 X 参数和 XX 参数并没有什么不同。X 参数的功能是十分稳定的。用一句话来说明 XX 参数的语法。所有的 XX 参数都以”-XX:”开始，但是随后的语法不同，取决于参数的类型：</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-常用的JVM参数"><span class="toc-number">2.0.1.</span> <span class="toc-text">1.4 常用的JVM参数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-1-跟踪JAVA虚拟机的垃圾回收"><span class="toc-number">2.0.1.1.</span> <span class="toc-text">1.4.1 跟踪JAVA虚拟机的垃圾回收</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#JVM新生代、永久代、老年代"><span class="toc-number">2.0.1.2.</span> <span class="toc-text">JVM新生代、永久代、老年代</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-2-配置JAVA虚拟机的堆空间"><span class="toc-number">2.0.1.3.</span> <span class="toc-text">1.4.2 配置JAVA虚拟机的堆空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-4-3-配置JAVA虚拟机的永久区-方法区"><span class="toc-number">2.0.1.4.</span> <span class="toc-text">1.4.3 配置JAVA虚拟机的永久区(方法区)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、动、静态请求的区别-面试点"><span class="toc-number">2.1.</span> <span class="toc-text">2、动、静态请求的区别(面试点)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、企业-Tomcat-运维"><span class="toc-number">2.2.</span> <span class="toc-text">3、企业 Tomcat 运维</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1Tomcat-简介"><span class="toc-number">2.2.1.</span> <span class="toc-text">3.1Tomcat 简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Tomcat端口号说明"><span class="toc-number">2.2.2.</span> <span class="toc-text">3.2 Tomcat端口号说明</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-Tomcat安装"><span class="toc-number">2.2.3.</span> <span class="toc-text">3.3 Tomcat安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-Tomcat基础环境JDK"><span class="toc-number">2.2.3.1.</span> <span class="toc-text">3.3.1 Tomcat基础环境JDK</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-2-安装Tomcat-amp-JDK"><span class="toc-number">2.2.3.2.</span> <span class="toc-text">3.3.2 安装Tomcat &amp; JDK</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-Tomcat目录介绍"><span class="toc-number">2.2.4.</span> <span class="toc-text">3.4 Tomcat目录介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-1-tomcat主目录介绍"><span class="toc-number">2.2.4.1.</span> <span class="toc-text">3.4.1 tomcat主目录介绍</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-Tomcat主配置文件详解"><span class="toc-number">2.2.5.</span> <span class="toc-text">3.5 Tomcat主配置文件详解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-1-server-xml组件类别"><span class="toc-number">2.2.5.1.</span> <span class="toc-text">3.5.1 server.xml组件类别</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-2-server-xml配置文件注释"><span class="toc-number">2.2.5.2.</span> <span class="toc-text">3.5.2 server.xml配置文件注释</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-3-Connector主要参数说明"><span class="toc-number">2.2.5.3.</span> <span class="toc-text">3.5.3 Connector主要参数说明</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-5-host参数详解"><span class="toc-number">2.2.5.4.</span> <span class="toc-text">3.5.5 host参数详解</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-WEB站点部署"><span class="toc-number">2.2.6.</span> <span class="toc-text">3.6  WEB站点部署</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-1-使用war包部署web站点"><span class="toc-number">2.2.6.1.</span> <span class="toc-text">3.6.1 使用war包部署web站点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-2-自定义默认网站目录"><span class="toc-number">2.2.6.2.</span> <span class="toc-text">3.6.2 自定义默认网站目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-3-部署开源站点（jspgou商城）"><span class="toc-number">2.2.6.3.</span> <span class="toc-text">3.6.3 部署开源站点（jspgou商城）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-4-Tomcat多实例配置"><span class="toc-number">2.2.6.4.</span> <span class="toc-text">3.6.4 Tomcat多实例配置</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-tomcat反向代理集群"><span class="toc-number">2.2.7.</span> <span class="toc-text">3.7 tomcat反向代理集群</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、Tomcat相关调优"><span class="toc-number">2.3.</span> <span class="toc-text">4、Tomcat相关调优</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-日志格式配置"><span class="toc-number">2.3.1.</span> <span class="toc-text">4.1 日志格式配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-JVM-参数优化"><span class="toc-number">2.3.2.</span> <span class="toc-text">4.2 JVM 参数优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-开启GC日志"><span class="toc-number">2.3.3.</span> <span class="toc-text">4.3 开启GC日志</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-开启JMX端口便于监控"><span class="toc-number">2.3.4.</span> <span class="toc-text">4.4 开启JMX端口便于监控</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-取消JVM-的默认DNS缓存时间"><span class="toc-number">2.3.5.</span> <span class="toc-text">4.5 取消JVM 的默认DNS缓存时间</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、JVM-运维实用排障工具"><span class="toc-number">2.4.</span> <span class="toc-text">5、JVM 运维实用排障工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-jps"><span class="toc-number">2.4.1.</span> <span class="toc-text">5.1 jps</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-jstack"><span class="toc-number">2.4.2.</span> <span class="toc-text">5.2 jstack</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、Tomcat安全优化"><span class="toc-number">2.5.</span> <span class="toc-text">6、Tomcat安全优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-telnet管理端口保护（强制）"><span class="toc-number">2.5.1.</span> <span class="toc-text">6.1 telnet管理端口保护（强制）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-ajp连接端口保护（推荐）"><span class="toc-number">2.5.2.</span> <span class="toc-text">6.2  ajp连接端口保护（推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-降权启动（强制）"><span class="toc-number">2.5.3.</span> <span class="toc-text">6.3 降权启动（强制）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-起停脚本权限回收（推荐）"><span class="toc-number">2.5.4.</span> <span class="toc-text">6.4 起停脚本权限回收（推荐）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#"><span class="toc-number">2.5.5.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7、Tomcat性能优化"><span class="toc-number">2.6.</span> <span class="toc-text">7、Tomcat性能优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8、扩展知识（面试会问）"><span class="toc-number">2.7.</span> <span class="toc-text">8、扩展知识（面试会问）</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://l66stbz.github.io/2024/08/08/Tomcat运维实战/1.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">L66</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Photo</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Tomcat运维实战</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2024-08-08 21:50:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2024-08-08</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2024-08-23 16:00:32"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2024-08-23</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="Tomcat-运维实战"><a href="#Tomcat-运维实战" class="headerlink" title="Tomcat 运维实战"></a>Tomcat 运维实战</h2><p>[TOC]</p>
<h3 id="1、Java常识"><a href="#1、Java常识" class="headerlink" title="1、Java常识"></a>1、Java常识</h3><ul>
<li><code>JVM（Java虚拟机）</code>：<ul>
<li>是一个抽象的计算机器，它使计算机能够运行Java程序。它是Java运行环境（JRE）的关键部分。JVM将Java字节码转换为机器语言，使得Java程序可以在不同的平台上运行而无需修改。</li>
</ul>
</li>
<li><strong>JRE（Java运行环境）</strong>：<ul>
<li>JRE是一组软件工具，提供运行Java应用程序所需的环境。它包括JVM、类库和其他支持文件。当您在系统上安装Java时，您实际上安装的是JRE。JRE足以运行Java应用程序。</li>
</ul>
</li>
<li><strong>Java类库</strong>：<ul>
<li>Java类库（也称为Java API - 应用程序编程接口）是一组预先编写的类、接口和包，为Java应用程序提供常用功能。开发人员可以利用它们来高效地构建Java应用程序。</li>
</ul>
</li>
</ul>
<h4 id="1-1-什么是JAVA虚拟机"><a href="#1-1-什么是JAVA虚拟机" class="headerlink" title="1.1 什么是JAVA虚拟机"></a><strong>1.1 什么是JAVA虚拟机</strong></h4><p>Java虚拟机（JVM）是Java平台的核心组件之一，它是一个在物理计算机上模拟的计算机，能够执行Java字节码。JVM的主要功能包括：</p>
<ol>
<li><strong>字节码执行</strong>：JVM执行Java编译器生成的字节码文件（.class文件），这些字节码文件包含了被编译的Java程序的中间代码。JVM通过解释字节码或将其即时编译为本地机器代码来执行Java程序。</li>
<li><strong>内存管理</strong>：JVM负责分配和管理Java程序运行所需的内存。这包括对内存的动态分配、垃圾回收以及内存区域的划分（如堆、栈、方法区等）。</li>
<li><strong>垃圾回收</strong>：JVM中的垃圾回收器负责自动回收不再使用的内存对象，以避免内存泄漏和内存溢出问题，从而保证Java程序的稳定性和可靠性。</li>
</ol>
<p><strong>白话文解释：</strong></p>
<p>所谓虚拟机，就是一台虚拟的计算机。他是一款软件，用来执行一系列虚拟计算机指令。大体上，虚拟机可以分为<code>系统虚拟机</code>和<code>程序虚拟机</code>。大名鼎鼎的VisualBox、VMware就属于系统虚拟机。他们完全是对物理计算机的仿真。提供了一个可以运行完整操作系统的软件平台。<br>程序虚拟机的典型代表就是Java虚拟机，它专门为执行单个计算机程序而设计，在Java虚拟机中执行的指令我们称为Java字节码指令。无论是系统虚拟机还是程序虚拟机，在上面运行的软件都限制于虚拟机提供的资源中。</p>
<h4 id="1-2-JAVA-如何做到跨平台"><a href="#1-2-JAVA-如何做到跨平台" class="headerlink" title="1.2 JAVA 如何做到跨平台"></a><strong>1.2 JAVA 如何做到跨平台</strong></h4><p>Java实现跨平台的关键在于其独特的编译和执行方式：</p>
<ol>
<li><strong>字节码</strong>： Java源代码首先被编译成<code>Java字节码</code>（.class文件），而不是针对特定平台的本地机器代码。这个字节码是与<code>平台无关</code>的中间代码，它包含了被执行的程序逻辑，但与具体的操作系统和硬件无关。</li>
<li><strong>JVM（Java虚拟机）</strong>： Java字节码由Java虚拟机（JVM）执行。JVM是一个针对特定平台的软件程序，它负责在运行时将字节码翻译成本地机器码，并在特定平台上执行。因此，只需为每个平台实现一个JVM，就能够在该平台上运行Java程序。</li>
<li><strong>一次编写，到处运行</strong>： 由于Java程序被编译成平台无关的字节码，所以同一份Java代码可以在任何安装了Java虚拟机的平台上运行，而不需要对代码进行修改或重新编译。这就实现了“<code>一次编写，到处运行</code>”的理念，使得Java具有了强大的跨平台能力。</li>
</ol>
<p>Java实现跨平台的核心是将源代码编译成与<code>平台无关</code>的<code>字节码</code>，并由Java虚拟机在各个平台上解释和执行字节码。这种设计使得Java成为了一种广泛应用的<code>跨平台</code>编程语言。同一个JAVA程序(JAVA字节码的集合)，通过JAVA虚拟机(JVM)运行于各大主流操作系统平台<br>比如Windows、CentOS、Ubuntu等。程序以虚拟机为中介，来实现跨平台。</p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562148557621.png" alt="1562148557621"></p>
<h4 id="1-3-常用虚拟机参数"><a href="#1-3-常用虚拟机参数" class="headerlink" title="1.3 常用虚拟机参数"></a>1.3 常用虚拟机参数</h4><p>Java虚拟机（JVM）提供了多种类型的参数，用于配置和优化Java应用程序的运行。其中，常见的参数类型包括以下三种：</p>
<ul>
<li><p><strong>标准参数</strong></p>
<ul>
<li>这些参数对所有的JVM都是通用的，例如 <code>-version</code>、<code>-help</code> 等。它们用于控制JVM的一般行为，如打印版本信息、显示帮助信息等。标准参数中包括功能和输出的参数都是很稳定的，很可能在将来的JVM版本中不会改变。你可以用 java 命令（或者是用 java -help）检索出所有标准参数。</li>
</ul>
</li>
<li><h5 id="X-类型参数"><a href="#X-类型参数" class="headerlink" title="X  类型参数"></a>X  类型参数</h5><ul>
<li><code>非标准化</code>的参数，在将来的版本中可能会改变。所有的这类参数都以 -X 开始。是特定于JVM实现的，可能会在不同版本的JVM之间有所差异。它们用于配置JVM的高级功能，如内存管理、垃圾回收算法、线程堆栈大小等。</li>
</ul>
</li>
<li><h5 id="XX-类型参数"><a href="#XX-类型参数" class="headerlink" title="XX  类型参数"></a>XX  类型参数</h5><ul>
<li><h2 id="在实际情况中-X-参数和-XX-参数并没有什么不同。X-参数的功能是十分稳定的。用一句话来说明-XX-参数的语法。所有的-XX-参数都以”-XX-”开始，但是随后的语法不同，取决于参数的类型："><a href="#在实际情况中-X-参数和-XX-参数并没有什么不同。X-参数的功能是十分稳定的。用一句话来说明-XX-参数的语法。所有的-XX-参数都以”-XX-”开始，但是随后的语法不同，取决于参数的类型：" class="headerlink" title="在实际情况中 X 参数和 XX 参数并没有什么不同。X 参数的功能是十分稳定的。用一句话来说明 XX 参数的语法。所有的 XX 参数都以”-XX:”开始，但是随后的语法不同，取决于参数的类型："></a>在实际情况中 X 参数和 XX 参数并没有什么不同。X 参数的功能是十分稳定的。用一句话来说明 XX 参数的语法。所有的 XX 参数都以”-XX:”开始，但是随后的语法不同，取决于参数的类型：</h2>  开启GC日志的参数: <code>-XX:+PrintGC(打印GC日志)</code><ul>
<li>最大永久代最大值： <code>-XX:MaxPermSize=2048m</code></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>应用程序参数</strong></p>
<ul>
<li>这些参数是由特定的Java应用程序定义和使用的，它们不是由JVM直接解释的。应用程序参数用于传递给Java应用程序的命令行参数或配置参数，以影响应用程序的行为，如指定输入文件、设置日志级别等。</li>
</ul>
</li>
</ul>
<h4 id="1-4-常用的JVM参数"><a href="#1-4-常用的JVM参数" class="headerlink" title="1.4 常用的JVM参数"></a>1.4 常用的JVM参数</h4><h5 id="1-4-1-跟踪JAVA虚拟机的垃圾回收"><a href="#1-4-1-跟踪JAVA虚拟机的垃圾回收" class="headerlink" title="1.4.1 跟踪JAVA虚拟机的垃圾回收"></a>1.4.1 跟踪JAVA虚拟机的垃圾回收</h5><p>GC日志：jvm<code>垃圾回收</code>，记录jvm的<code>运行状态</code>，OOM<code>内存溢出</code>的报错信息等。</p>
<ul>
<li><code>%t</code> 将会被替代为时间字符串，格式为: <code>YYYY-MM-DD_HH-MM-SS</code></li>
</ul>
<p>开启GC日志:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/data0/logs/gc-%t.log"</span><br></pre></td></tr></table></figure>

<ol>
<li><h5 id="JVM新生代、永久代、老年代"><a href="#JVM新生代、永久代、老年代" class="headerlink" title="JVM新生代、永久代、老年代"></a>JVM新生代、永久代、老年代</h5></li>
</ol>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/202405102053029.webp" alt></p>
<p><strong><code>新生代</code>：Tomcat的新生代概念主要指的是JVM中用于存放新创建对象的内存区域</strong>。一般占据堆的<code>1/3</code>空间。可以通过参数<code>-XX:NewRatio</code>来调整。由于频繁创建对象，所以新生代会频繁触发进行垃圾回收。</p>
<p><strong><code>老年代</code></strong>：<strong>用于存放长时间存活的对象</strong>。</p>
<p><strong><code>永久代</code></strong>：指内存的永久保存区域，主要存放Class和Meta（元数据）的信息。</p>
<p><strong>在Java8中，永久代已经被移除，被一个称为“元数据区”（元空间）的区域所取代。</strong></p>
<p>元空间的本质和永久代类似，都是对JVM规范中方法区的实现。不过元空间与永久代之间最大的区别在于：元空间并不在虚拟机中，而是使用本地内存。因此，默认情况下，元空间的大小仅受本地内存限制。</p>
<h5 id="1-4-2-配置JAVA虚拟机的堆空间"><a href="#1-4-2-配置JAVA虚拟机的堆空间" class="headerlink" title="1.4.2 配置JAVA虚拟机的堆空间"></a>1.4.2 配置JAVA虚拟机的堆空间</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-Xms：指定Java虚拟机的初始堆大小。例如，-Xms512m表示初始堆大小为512MB。</span><br><span class="line">-Xmx：指定Java虚拟机的最大堆大小。例如，-Xmx1024m表示最大堆大小为1024MB。</span><br><span class="line"><span class="meta">#</span><span class="bash"> 这两个参数可以用来控制Java应用程序在运行时所能使用的堆空间大小。通常情况下，将这两个参数设置为相同的值，以避免堆空间大小的动态调整。增大堆空间可以提高应用程序的性能，减少垃圾回收的频率，但也会增加内存的消耗。`推荐设置为可用物理内存的一半`。</span></span><br><span class="line"></span><br><span class="line">例如，如果要将初始堆大小设置为512MB，最大堆大小设置为1024MB，可以使用以下命令：</span><br><span class="line">java -Xms512m -Xmx1024m -jar YourApp.jar</span><br></pre></td></tr></table></figure>



<h5 id="1-4-3-配置JAVA虚拟机的永久区-方法区"><a href="#1-4-3-配置JAVA虚拟机的永久区-方法区" class="headerlink" title="1.4.3 配置JAVA虚拟机的永久区(方法区)"></a>1.4.3 配置JAVA虚拟机的永久区(方法区)</h5><p><strong>JAVA虚拟机的永久区介绍</strong></p>
<p>在Java虚拟机中，<code>永久区</code>是一块用于存储类、方法、常量等元数据的内存区域。在早期的Java版本中，永久区主要用于存储这些元数据，例如类的字节码、静态变量、方法信息、常量池等。然而，随着Java技术的发展，永久代在Java 8及之后的版本中被元空间（Metaspace）所取代。</p>
<p>永久区的特点包括：</p>
<ol>
<li><p><strong>固定大小</strong>：永久区的大小在Java虚拟机启动时被固定下来，不能动态调整。在Java 8之前，可以通过设置 <code>-XX:PermSize</code> 和 <code>-XX:MaxPermSize</code> 参数来调整永久代的大小。</p>
</li>
<li><p><strong>垃圾回收</strong>：尽管永久区的大小是固定的，但是永久区中的垃圾仍然会被回收。Java虚拟机会执行永久代的垃圾回收以释放不再使用的类和元数据。在Java 8之前，可以通过 <code>-XX:+CMSClassUnloadingEnabled</code> 参数开启永久代的垃圾回收。</p>
</li>
<li><p><strong>内存泄漏问题</strong>：永久区的内存泄漏是一个常见的问题。由于永久区的大小是<code>固定</code>的，如果应用程序不断加载新的类或者重新加载类，而没有对原来的类进行<code>垃圾回收</code>，就会导致永久区的内存使用量不断增加，最终导致内存溢出。</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:PermSize   	  内存永久保留区域  ：<span class="comment">//所占用的内存是堆内存的一部分内存，不能超过堆内存</span></span><br><span class="line">-XX:MaxPermSize   内存最大永久保留区域</span><br><span class="line"></span><br><span class="line">JDK <span class="number">1.8</span>中 PermSize 和 MaxPermGen 已经无效。JDK <span class="number">1.8</span> 中已经不存在永久代的结论 而以 元空间 代替。</span><br></pre></td></tr></table></figure>

<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1569157453195.png" alt="1569157453195"></p>
<h3 id="2、动、静态请求的区别-面试点"><a href="#2、动、静态请求的区别-面试点" class="headerlink" title="2、动、静态请求的区别(面试点)"></a><strong>2、动、静态请求的区别(<code>面试点</code>)</strong></h3><p>静态请求和动态请求是与网络服务中的<code>内容生成</code>和<code>提供相关</code>的两个重要概念。</p>
<ol>
<li><p><strong>静态请求</strong>：</p>
<ul>
<li>静态请求是指客户端（通常是Web浏览器）向服务器请求获取静态内容，如HTML文件、CSS样式表、JavaScript脚本、图像、视频和其他媒体文件等。这些内容在服务器上<code>预先存在</code>，不需要在请求时生成或处理。服务器在收到静态请求后，会直接将文件发送给客户端，不进行任何额外的<code>处理或计算</code>。因为静态内容在每次请求时都是<code>相同</code>的，所以静态请求的响应速度通常<code>较快</code>。</li>
</ul>
</li>
<li><p><strong>动态请求</strong>：</p>
<ul>
<li>动态请求是指客户端向服务器请求生成动态内容的过程。动态内容是根据用户请求时的<code>特定条件</code>、<code>参数</code>或者数据库中的<code>数据</code>等动态生成的。服务器收到动态请求后，会根据请求的内容、用户信息、数据库查询结果等动态生成需要返回给客户端的内容，然后将生成的内容发送给客户端。动态请求通常涉及服务器端的脚本语言（如PHP、Python、Node.js、Java等）来处理请求并生成响应。由于动态请求需要在服务器端进行处理和计算，响应时间通常<code>较长</code>。</li>
</ul>
</li>
</ol>
<p>总结：</p>
<ul>
<li>静态请求指的是获取预先存在并不需要额外处理的静态内容，响应速度较快。</li>
<li>动态请求指的是根据特定条件动态生成内容的请求，响应时间较长，需要服务器端进行处理和计算。</li>
</ul>
<h3 id="3、企业-Tomcat-运维"><a href="#3、企业-Tomcat-运维" class="headerlink" title="3、企业 Tomcat 运维"></a>3、企业 Tomcat 运维</h3><h4 id="3-1Tomcat-简介"><a href="#3-1Tomcat-简介" class="headerlink" title="3.1Tomcat 简介"></a><strong>3.1Tomcat 简介</strong></h4><p><strong>Tomcat</strong>官网： <a href="http://tomcat.apache.org/" target="_blank" rel="noopener">http://tomcat.apache.org</a></p>
<p>Tomcat是Apache软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，由Apache、Sun和其他一些公司及个人共同开发而成。并且Tomcat服务器是一个免费的开放源代码的Web应用服务器，属于<code>轻量级</code>应用服务器，在中小型系统和并发访问用户不是很多的场合下被普遍使用，是开发和调试JSP程序的首选。</p>
<p><strong>Tomcat：</strong>JAVA容器，WEB容器，WEB中间件</p>
<h4 id="3-2-Tomcat端口号说明"><a href="#3-2-Tomcat端口号说明" class="headerlink" title="3.2 Tomcat端口号说明"></a>3.2 Tomcat端口号说明</h4><ol>
<li><strong><code>HTTP端口（默认端口号为8080）</code></strong>：<ul>
<li>HTTP端口是用于处理HTTP请求的端口。当浏览器发送HTTP请求时，会使用这个端口与Tomcat服务器通信。</li>
<li>默认情况下，Tomcat监听8080端口，可以通过在<code>server.xml</code>配置文件中的<code>&lt;Connector&gt;</code>元素来修改。</li>
</ul>
</li>
<li><strong>HTTPS端口（默认端口号为8443）</strong>：<ul>
<li>HTTPS端口是用于处理HTTPS请求的端口。HTTPS是HTTP的安全版本，通过SSL/TLS加密传输数据。</li>
<li>默认情况下，Tomcat监听8443端口，可以通过在<code>server.xml</code>配置文件中的<code>&lt;Connector&gt;</code>元素来修改。</li>
</ul>
</li>
<li><strong><code>AJP端口（默认端口号为8009）</code></strong>：<ul>
<li>AJP（Apache JServ Protocol）端口是用于与Apache HTTP服务器之间进行通信的端口。通常用于将Tomcat与Apache Web服务器进行集成。</li>
<li>默认情况下，Tomcat监听8009端口，可以通过在<code>server.xml</code>配置文件中的<code>&lt;Connector&gt;</code>元素来修改。</li>
</ul>
</li>
<li><strong><code>Shutdown端口（默认端口号为8005）</code></strong>：<ul>
<li>Shutdown端口用于<code>接收关闭</code>Tomcat服务器的命令。当管理员想要停止Tomcat服务器时，可以通过连接到这个端口发送关闭命令。</li>
<li>默认情况下，Tomcat监听8005端口，可以通过在<code>server.xml</code>配置文件中的<code>&lt;Server&gt;</code>元素来修改。</li>
</ul>
</li>
</ol>
<p><strong>使用方案</strong>：</p>
<p>方案一：  Tomcat         //单独使用   —-基本不用<br>方案二：  Nginx+Tomcat       //反向代理和负载均衡<br>方案三：<br>                                  Nginx<br>                                      |<br>    +——————————————————–+<br>    |               |               |                       |<br>Tomcat1 Tomcat2 Tomcat3         nginx服务器  —-解析静态页面</p>
<p>建议使用Nginx和Tomcat配合，Nginx处理静态，Tomcat处理动态程序<br>方案三中后端Tomcat可以运行在单独的主机，也可以是同一台主机上的多实例</p>
<h4 id="3-3-Tomcat安装"><a href="#3-3-Tomcat安装" class="headerlink" title="3.3 Tomcat安装"></a>3.3 Tomcat安装</h4><h5 id="3-3-1-Tomcat基础环境JDK"><a href="#3-3-1-Tomcat基础环境JDK" class="headerlink" title="3.3.1 Tomcat基础环境JDK"></a>3.3.1 Tomcat基础环境JDK</h5><p>Java Development Kit（JDK）是Java开发工具包的缩写，是Java平台的核心组件之一，提供了用于开发、编译、调试和运行Java应用程序的各种工具和库。以下是JDK的主要组成部分和功能：</p>
<ol>
<li><strong>Java编译器（javac）</strong>：<ul>
<li>Java编译器将Java源代码编译成字节码，可由Java虚拟机（JVM）执行。</li>
</ul>
</li>
<li><strong>Java运行时环境（JRE）</strong>：<ul>
<li>JDK包含完整的Java运行时环境，包括Java虚拟机（JVM）和Java标准类库。</li>
</ul>
</li>
<li><strong>Java标准类库</strong>：<ul>
<li>JDK包含了大量的Java标准类库，提供了丰富的API，用于开发各种类型的应用程序，包括文件操作、网络通信、图形用户界面（GUI）、数据库访问等功能。</li>
</ul>
</li>
<li><strong>调试工具</strong>：<ul>
<li>JDK提供了一系列调试工具，如Java调试器（jdb）和Java虚拟机调试接口（JVMTI），用于调试Java应用程序和排查问题。</li>
</ul>
</li>
<li><strong>JavaDoc工具</strong>：<ul>
<li>JavaDoc工具用于从Java源代码生成API文档，帮助开发者编写和管理代码文档。</li>
</ul>
</li>
</ol>
<p><strong>JDK</strong>下载面页：<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html&gt;" target="_blank" rel="noopener">http://www.oracle.com/technetwork/java/javase/downloads/index.html&gt;</a></p>
<h5 id="3-3-2-安装Tomcat-amp-JDK"><a href="#3-3-2-安装Tomcat-amp-JDK" class="headerlink" title="3.3.2 安装Tomcat &amp; JDK"></a>3.3.2 安装Tomcat &amp; JDK</h5><p>安装时候选择tomcat软件版本要与程序开发使用的版本一致。jdk版本要进行与tomcat保持一致。</p>
<p>系统环境说明</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat01 ~]# uname -a</span><br><span class="line">Linux tomcat01 3.10.0-1160.el7.x86_64 #1 SMP Mon Oct 19 16:18:59 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line"></span><br><span class="line">[root@java-tomcat01 ~]# cat /etc/redhat-release </span><br><span class="line">CentOS Linux release 7.9.2009 (Core)</span><br><span class="line"></span><br><span class="line">[root@java-tomcat01 ~]# setenforce 0</span><br><span class="line">[root@java-tomcat01 ~]# sed -i "s/SELINUX=enforcing/SELINUX=disabled/g" /etc/selinux/config</span><br><span class="line"></span><br><span class="line">[root@java-tomcat01 ~]# systemctl disable --now firewalld</span><br></pre></td></tr></table></figure>

<p>安装JDK</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">上传jdk1.8到服务器。安装jdk</span><br><span class="line">[root@java-tomcat1 ~]# tar xzf jdk-8u191-linux-x64.tar.gz -C /usr/local/</span><br><span class="line">[root@java-tomcat1 ~]# cd /usr/local/</span><br><span class="line">[root@java-tomcat1 local]# ln -s jdk1.8.0_211  java  #或者改名都可以</span><br><span class="line">设置环境变量:</span><br><span class="line">[root@java-tomcat1 local]# vim /etc/profile.d/jdk.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/</span></span><br><span class="line">export JAVA_HOME=/usr/local/java   #指定java安装目录</span><br><span class="line">export PATH=$JAVA_HOME/bin:$JAVA_HOME/jre/bin:$PATH    #用于指定java系统查找命令的路径</span><br><span class="line">检测JDK是否安装成功:</span><br><span class="line">[root@java-tomcat1 local]# source  /etc/profile.d/jdk.sh</span><br><span class="line">[root@java-tomcat1 local]# java -version</span><br><span class="line">java version "1.8.0_191"</span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_191-b12)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.191-b12, mixed mode)</span><br></pre></td></tr></table></figure>

<p>安装Tomcat</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 解压Tomcat安装包到指定目录</span></span><br><span class="line">[root@java-tomcat01 ~]# tar xf apache-tomcat-8.5.45.tar.gz  -C /usr/local/ &amp;&amp;  cd /usr/local/</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 创建软链接</span></span><br><span class="line">[root@java-tomcat01 local]# ln -s apache-tomcat-8.5.45/   tomcat</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 设置环境变量:</span></span><br><span class="line">[root@java-tomcat01 local]# vim /etc/profile.d/tomcat.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">export TOMCAT_HOME=/usr/local/tomcat</span><br><span class="line">export PATH=$PATH:$TOMCAT_HOME/bin:$JAVA_HOME/bin</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重新加载配置文件</span></span><br><span class="line">[root@java-tomcat1 application]# source  /etc/profile.d/tomcat.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看tomcat是否安装成功</span></span><br><span class="line">[root@java-tomcat01 bin]# catalina.sh version</span><br><span class="line">	命令会显</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Tomcat实例的基础目录，即配置文件、日志文件等所在的目录路径。</span></span><br><span class="line">Using CATALINA_BASE:   /usr/local/tomcat</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Tomcat的安装目录，即Tomcat的主要程序文件所在的目录路径。</span></span><br><span class="line">Using CATALINA_HOME:   /usr/local/tomcat</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Tomcat的临时目录，用于存放临时文件和数据，比如会话数据、上传文件等。</span></span><br><span class="line">Using CATALINA_TMPDIR: /usr/local/tomcat/temp</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Java运行时环境（JRE）的安装目录，即Java解释器和标准类库所在的目录路径。</span></span><br><span class="line">Using JRE_HOME:        /usr/local/java</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Java类路径（CLASSPATH），用于指定Java程序运行时要加载的类库和目录。在这里指定了两个JAR文件，分别是bootstrap.jar和tomcat-juli.jar，这些JAR文件包含了Tomcat启动和日志相关的类。</span></span><br><span class="line">Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Tomcat服务器的版本信息，这里是Tomcat 8.5.45。</span></span><br><span class="line">Server version: Apache Tomcat/8.5.45</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Tomcat服务器的构建时间，即Tomcat程序文件的编译时间。</span></span><br><span class="line">Server built:   Aug 14 2019 22:21:25 UTC</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Tomcat服务器的具体版本号。</span></span><br><span class="line">Server number:  8.5.45.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示操作系统的名称，这里是Linux。</span></span><br><span class="line">OS Name:        Linux</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示操作系统的版本号。</span></span><br><span class="line">OS Version:     3.10.0-1160.el7.x86_64</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示操作系统的体系结构，这里是64位的。</span></span><br><span class="line">Architecture:   amd64</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Java虚拟机（JVM）的版本信息。</span></span><br><span class="line">JVM Version:    1.8.0_211-b12</span><br><span class="line"><span class="meta">#</span><span class="bash"> 表示Java虚拟机（JVM）的提供商，这里是Oracle Corporation。</span></span><br><span class="line">JVM Vendor:     Oracle Corporation</span><br></pre></td></tr></table></figure>



<h4 id="3-4-Tomcat目录介绍"><a href="#3-4-Tomcat目录介绍" class="headerlink" title="3.4 Tomcat目录介绍"></a>3.4 Tomcat目录介绍</h4><h5 id="3-4-1-tomcat主目录介绍"><a href="#3-4-1-tomcat主目录介绍" class="headerlink" title="3.4.1 tomcat主目录介绍"></a>3.4.1 tomcat主目录介绍</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 ~]# cd /usr/local/tomcat</span><br><span class="line">[root@java-tomcat1 tomcat]# yum install -y tree</span><br><span class="line">[root@java-tomcat1 tomcat]# tree -L 1</span><br><span class="line">.</span><br><span class="line">├── bin     # 包含了Tomcat服务器的可执行文件，如启动和关闭脚本、管理脚本等。</span><br><span class="line">├── BUILDING.txt	# 包含了关于如何构建Tomcat服务器的说明文档。</span><br><span class="line">├── conf    # 包含了Tomcat服务器的配置文件，如服务器配置、日志配置、Web应用程序配置等。</span><br><span class="line">├── CONTRIBUTING.md	# 包含了关于如何向Tomcat项目贡献代码的说明文档。</span><br><span class="line">├── lib      # 包含了Tomcat服务器运行所需的Java类库文件。</span><br><span class="line">├── LICENSE		# 包含了Tomcat服务器的许可证文件。</span><br><span class="line">├── logs     # 包含了Tomcat服务器的日志文件，记录了服务器的运行状态和事件信息。</span><br><span class="line">├── NOTICE		# 包含了关于Tomcat服务器的版权和许可信息的通知文件。</span><br><span class="line">├── README.md	# 包含了Tomcat服务器的简要说明文档。</span><br><span class="line">├── RELEASE-NOTES	# 包含了Tomcat服务器的发布说明文档，记录了每个版本的更新内容和改进。</span><br><span class="line">├── RUNNING.txt		# 包含了关于如何运行Tomcat服务器的说明文档。</span><br><span class="line">├── temp     # 用于存放Tomcat服务器的临时文件，如会话数据、上传文件等。</span><br><span class="line">├── webapps  # 用于存放Web应用程序的目录，每个子目录代表一个独立的Web应用程序</span><br><span class="line">└── work     # 用于存放Tomcat服务器的工作目录，如编译的JSP文件、临时缓存等。</span><br><span class="line"></span><br><span class="line">7 directories, 7 files</span><br></pre></td></tr></table></figure>

<p><strong>2、webapps目录介绍</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 tomcat]# cd webapps/</span><br><span class="line">[root@java-tomcat1 webapps]# tree -L 1</span><br><span class="line">.</span><br><span class="line">├── docs  # 包含了Tomcat服务器的文档和示例文件，如用户手册、API文档等。</span><br><span class="line">├── examples  # 包含了Tomcat服务器的示例应用程序，提供了一些简单的示例代码和演示。</span><br><span class="line">├── host-manager  # 包含了Tomcat的主机管理应用程序，允许管理员通过Web界面管理虚拟主机。</span><br><span class="line">├── manager    # 包含了Tomcat的应用程序管理应用程序，允许管理员通过Web界面管理部署在Tomcat上的Web应用程序</span><br><span class="line">└── `ROOT`    # 是Tomcat服务器的默认根应用程序（也称为ROOT应用程序），即当用户访问Tomcat服务器时默认会加载的应用程序。通常用于展示Tomcat服务器的欢迎页面或其他默认内容。</span><br><span class="line"></span><br><span class="line">5 directories, 0 files</span><br></pre></td></tr></table></figure>

<p><strong>3、Tomcat配置文件目录介绍（conf）</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 webapps]# cd ../conf/</span><br><span class="line">[root@java-tomcat1 conf]# tree -L 1</span><br><span class="line">.</span><br><span class="line">├── catalina.policy		# Tomcat服务器的安全策略文件，用于定义安全策略和权限控制。</span><br><span class="line">├── catalina.properties	# Tomcat服务器的全局配置文件，包含了一些Tomcat服务器的运行参数和属性设置。</span><br><span class="line">├── context.xml			# Tomcat服务器的上下文配置文件，用于配置特定Web应用程序的上下文参数和资源定义。</span><br><span class="line">├── jaspic-providers.xml</span><br><span class="line">├── jaspic-providers.xsd </span><br><span class="line">├── logging.properties	# Tomcat服务器的日志配置文件，用于配置日志记录器、日志格式和输出目的地等。</span><br><span class="line">├── `server.xml			# Tomcat服务器的主配置文件，包含了服务器的核心配置，如端口设置、连接器配置、虚拟主机设置等。`</span><br><span class="line">├── tomcat-users.xml	# Tomcat服务器的用户认证配置文件，用于定义Tomcat服务器的用户、角色和访问权限。</span><br><span class="line">├── tomcat-users.xsd	# Tomcat用户认证配置文件的XML模式定义（XSD）文件，用于验证Tomcat用户认证配置文件的结构和语法。		</span><br><span class="line">└── web.xml				# 定义的Web应用程序配置文件，包含了Web应用程序的部署描述符，用于配置Servlet、过滤器、监听器等组件。</span><br><span class="line"></span><br><span class="line">0 directories, 10 files</span><br></pre></td></tr></table></figure>

<p><strong>4、Tomcat的管理</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动程序 </span></span><br><span class="line">[root@java-tomcat01 conf]# catalina.sh  start</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭程序 </span></span><br><span class="line">[root@java-tomcat01 conf]# catalina.sh stop</span><br></pre></td></tr></table></figure>

<p> <code>注意</code>：<strong>tomcat未启动的情况下使用shutdown脚本，会有大量的输出信息。</strong></p>
<p>检查tomcat是否启动正常</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 bin]# netstat -lntp  |grep java</span><br><span class="line">tcp6       0      0 :::8080         :::*                   LISTEN      30560/java</span><br><span class="line">tcp6       0      0 127.0.0.1:8005          :::*          LISTEN      30560/java</span><br><span class="line">tcp6       0      0 :::8009                 :::*           LISTEN      30560/java</span><br></pre></td></tr></table></figure>

<p><code>说明：</code><strong>所有与java相关的，服务启动都是java命名的进程</strong></p>
<p>启动完成浏览器进行访问<a href="http://IP:8080" target="_blank" rel="noopener">http://IP:8080</a></p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/image-20240406210329630.png" alt="image-20240406210329630"></p>
<p>查看Tomcat日志</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat01 conf]# tail -f /usr/local/tomcat/logs/catalina.out </span><br><span class="line">06-Apr-2024 21:02:19.361 信息 [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["http-nio-8080"]</span><br><span class="line">06-Apr-2024 21:02:19.373 信息 [main] org.apache.coyote.AbstractProtocol.start Starting ProtocolHandler ["ajp-nio-8009"]</span><br><span class="line">06-Apr-2024 21:02:19.375 信息 [main] org.apache.catalina.startup.Catalina.start Server startup in 443 ms</span><br></pre></td></tr></table></figure>



<h4 id="3-5-Tomcat主配置文件详解"><a href="#3-5-Tomcat主配置文件详解" class="headerlink" title="3.5 Tomcat主配置文件详解"></a>3.5 Tomcat主配置文件详解</h4><h5 id="3-5-1-server-xml组件类别"><a href="#3-5-1-server-xml组件类别" class="headerlink" title="3.5.1 server.xml组件类别"></a>3.5.1 server.xml组件类别</h5><p>顶级组件：位于整个配置的顶层，如server。</p>
<p>容器类组件：可以包含其它组件的组件，如service、engine、host、context。</p>
<p>连接器组件：连接用户请求至tomcat，如connector(引擎)。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;server&gt;  #表示一个运行于JVM中的tomcat实例。</span><br><span class="line">     &lt;service&gt; #服务。将connector关联至engine，因此一个service内部可以有多个connector，但只能有一个引擎engine。</span><br><span class="line">     &lt;connector /&gt; #接收用户请求，类似于httpd的listen配置监听端口的</span><br><span class="line">     &lt;engine&gt;  #核心容器组件，catalina引擎，负责通过connector接收用户请求，并处理请求，将请求转至对应的虚拟主机host。</span><br><span class="line">     &lt;host&gt;   #类似于httpd中的虚拟主机，</span><br><span class="line">     &lt;context&gt;&lt;/context&gt;  #配置context的主要目的指定对应对的webapp的根目录。其还能为webapp指定额外的属性，如部署方式等。</span><br><span class="line">     &lt;/host&gt;</span><br><span class="line">     &lt;host&gt;</span><br><span class="line">     &lt;context&gt;&lt;/context&gt;</span><br><span class="line">     &lt;/host&gt;</span><br><span class="line">     &lt;/engine&gt;</span><br><span class="line">     &lt;/service&gt;</span><br><span class="line">&lt;/server&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-5-2-server-xml配置文件注释"><a href="#3-5-2-server-xml配置文件注释" class="headerlink" title="3.5.2 server.xml配置文件注释"></a>3.5.2 server.xml配置文件注释</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version='1.0' encoding='utf-8'?&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">&lt;Server&gt;元素代表整个容器,是Tomcat实例的顶层元素.它包含一个&lt;Service&gt;元素.并且它不能做为任何元素的子元素.</span><br><span class="line">    port指定Tomcat监听shutdown命令端口</span><br><span class="line">    shutdown指定终止Tomcat服务器运行时,发给Tomcat服务器的shutdown监听端口的字符串.该属性必须设置</span><br><span class="line"><span class="meta">--&gt;</span></span><br><span class="line">&lt;Server port="8005" shutdown="SHUTDOWN"&gt;</span><br><span class="line">  &lt;Listener className="org.apache.catalina.startup.VersionLoggerListener" /&gt;</span><br><span class="line">  &lt;Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" /&gt;</span><br><span class="line">  &lt;Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" /&gt;</span><br><span class="line">  &lt;Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" /&gt;</span><br><span class="line">  &lt;Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener" /&gt;</span><br><span class="line">  &lt;GlobalNamingResources&gt;</span><br><span class="line">    &lt;Resource name="UserDatabase" auth="Container"</span><br><span class="line">              type="org.apache.catalina.UserDatabase"</span><br><span class="line">              description="User database that can be updated and saved"</span><br><span class="line">              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"</span><br><span class="line">              pathname="conf/tomcat-users.xml" /&gt;</span><br><span class="line">  &lt;/GlobalNamingResources&gt;</span><br><span class="line">  &lt;!--service服务组件--&gt;</span><br><span class="line">  &lt;Service name="Catalina"&gt;</span><br><span class="line">    &lt;!-- Connector主要参数说明（见下面） --&gt;</span><br><span class="line">    &lt;Connector port="8080" protocol="HTTP/1.1"</span><br><span class="line">               connectionTimeout="20000"</span><br><span class="line">               redirectPort="8443" /&gt;</span><br><span class="line">    &lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /&gt;</span><br><span class="line">    &lt;Engine name="Catalina" defaultHost="localhost"&gt;</span><br><span class="line">      &lt;Realm className="org.apache.catalina.realm.LockOutRealm"&gt;</span><br><span class="line">        &lt;Realm className="org.apache.catalina.realm.UserDatabaseRealm"</span><br><span class="line">               resourceName="UserDatabase"/&gt;</span><br><span class="line">      &lt;/Realm&gt;</span><br><span class="line">      &lt;!-- 详情常见（host参数详解）--&gt;</span><br><span class="line">      &lt;Host name="localhost"  appBase="webapps"</span><br><span class="line">            unpackWARs="true" autoDeploy="true"&gt;</span><br><span class="line">        &lt;!-- 详情见扩展（Context参数说明 ）--&gt;</span><br><span class="line">        &lt;Context path="" docBase="" debug=""/&gt;</span><br><span class="line">        &lt;Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"</span><br><span class="line">               prefix="localhost_access_log" suffix=".txt"</span><br><span class="line">               pattern="%h %l %u %t &amp;quot;%r&amp;quot; %s %b" /&gt;</span><br><span class="line">      &lt;/Host&gt;</span><br><span class="line">    &lt;/Engine&gt;</span><br><span class="line">  &lt;/Service&gt;</span><br><span class="line">&lt;/Server&gt;</span><br></pre></td></tr></table></figure>

<h5 id="3-5-3-Connector主要参数说明"><a href="#3-5-3-Connector主要参数说明" class="headerlink" title="3.5.3 Connector主要参数说明"></a>3.5.3 Connector主要参数说明</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">port:指定服务器端要创建的端口号，并在这个端口监听来自客户端的请求。</span><br><span class="line">protocol：连接器使用的协议，支持HTTP和AJP。AJP（Apache Jserv Protocol）专用于tomcat与apache建立通信的， 在httpd反向代理用户请求至tomcat时使用（可见Nginx反向代理时不可用AJP协议）。</span><br><span class="line">redirectPort：指定服务器正在处理http请求时收到了一个SSL传输请求后重定向的端口号</span><br><span class="line">maxThreads：接收最大请求的并发数</span><br><span class="line">connectionTimeout  指定超时的时间数(以毫秒为单位)</span><br></pre></td></tr></table></figure>

<p>&lt;Connector port=”8080” protocol=”HTTP/1.1” </p>
<p>​               maxThreads=”500”    —-默认是200<br>​               connectionTimeout=”20000”       ———连接超时时间。单位毫秒<br>​               redirectPort=”8443” /&gt;</p>
<h5 id="3-5-5-host参数详解"><a href="#3-5-5-host参数详解" class="headerlink" title="3.5.5 host参数详解"></a>3.5.5 host参数详解</h5><p>​            &lt;Host name=”localhost”  appBase=”webapps”<br>​            unpackWARs=”true” autoDeploy=”true”&gt;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">host	# 表示一个虚拟主机。</span><br><span class="line">name	# 指定主机名。</span><br><span class="line">appBase	# 应用程序基本目录，即存放应用程序的目录.一般为appBase="webapps"，相对于CATALINA_HOME而言的，也可以写绝对路径。</span><br><span class="line">unpackWARs	# 如果为true，则tomcat会自动将WAR文件解压，否则不解压，直接从WAR文件中运行应用程序。</span><br><span class="line">autoDeploy	# 在tomcat启动时，是否自动部署。</span><br></pre></td></tr></table></figure>



<h4 id="3-6-WEB站点部署"><a href="#3-6-WEB站点部署" class="headerlink" title="3.6  WEB站点部署"></a>3.6  WEB站点部署</h4><p>上线的代码有两种方式：</p>
<ul>
<li>直接将程序目录放在webapps目录下面。</li>
<li>使用开发工具将程序打包成war包，然后上传到webapps目录下面。</li>
</ul>
<h5 id="3-6-1-使用war包部署web站点"><a href="#3-6-1-使用war包部署web站点" class="headerlink" title="3.6.1 使用war包部署web站点"></a><strong>3.6.1 使用war包部署web站点</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 方式一：自动解压</span></span><br><span class="line">[root@java-tomcat1 ~]# wget http://updates.jenkins-ci.org/download/war/2.129/jenkins.war</span><br><span class="line">[root@java-tomcat1 ~]# ls</span><br><span class="line">jenkins.war</span><br><span class="line"><span class="meta">#</span><span class="bash"> 进入tomcat目录</span></span><br><span class="line">[root@java-tomcat1 ~]# cd /usr/local/tomcat/ </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将原来的发布网站目录备份</span></span><br><span class="line">[root@java-tomcat1 tomcat]# cp -r webapps/ /opt/    </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 清空发布网站里面的内容</span></span><br><span class="line">[root@java-tomcat1 tomcat]# cd webapps/</span><br><span class="line">[root@java-tomcat1 webapps]# rm -rf *   </span><br><span class="line"></span><br><span class="line"><span class="meta"> #</span><span class="bash"> 将war包拷贝到当前目录</span></span><br><span class="line">[root@java-tomcat1 webapps]# cp ~/jenkins.war . </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动Tomcat实例</span></span><br><span class="line">[root@java-tomcat1 webapps]# catalina.sh start   </span><br><span class="line">Using CATALINA_BASE:   /data/application/tomcat</span><br><span class="line">Using CATALINA_HOME:   /data/application/tomcat</span><br><span class="line">Using CATALINA_TMPDIR: /data/application/tomcat/temp</span><br><span class="line">Using JRE_HOME:        /usr/local/java</span><br><span class="line">Using CLASSPATH:       /data/application/tomcat/bin/bootstrap.jar:/data/application/tomcat/bin/tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br><span class="line">[root@java-tomcat1 webapps]# ls</span><br><span class="line">jenkins  jenkins.war</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 方式二：手动解压</span></span><br><span class="line">[root@java-tomcat1 webapps]# catalina.sh stop   #关闭tomcat</span><br><span class="line">[root@java-tomcat1 ~]# cd /usr/local/tomcat/webapps/</span><br><span class="line">[root@java-tomcat1 webapps]# rm -rf *    </span><br><span class="line">[root@java-tomcat1 webapps]# mkdir ROOT      #创建一个ROOT目录存放war包</span><br><span class="line">[root@java-tomcat1 webapps]# cd ROOT/</span><br><span class="line">[root@java-tomcat1 ROOT]# cp /root/jenkins.war .</span><br><span class="line">[root@java-tomcat1 ROOT]# unzip jenkins.war</span><br><span class="line">[root@java-tomcat01 ROOT]# catalina.sh start</span><br></pre></td></tr></table></figure>

<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562256628954.png" alt="1562256628954"></p>
<p>浏览器访问：<a href="http://IP:8080/jenkins" target="_blank" rel="noopener">http://IP:8080/jenkins</a> </p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562255930078.png" alt="1562255930078"></p>
<h5 id="3-6-2-自定义默认网站目录"><a href="#3-6-2-自定义默认网站目录" class="headerlink" title="3.6.2 自定义默认网站目录"></a>3.6.2 自定义默认网站目录</h5><p>1、修改默认发布目录:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 ~]# catalina.sh stop</span><br><span class="line">[root@java-tomcat1 ~]# mkdir -p /data/application/webapp  #创建发布目录</span><br><span class="line">[root@java-tomcat1 ~]# vim /usr/local/tomcat/conf/server.xml</span><br></pre></td></tr></table></figure>

<p>将原来的</p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562335606126.png" alt="1562335606126"></p>
<p>修改为</p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562335650998.png" alt="1562335650998"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 ~]# cp /root/jenkins.war /data/application/webapp/</span><br><span class="line">[root@java-tomcat1 ~]# catalina.sh start ; tail -f /usr/local/tomcat/logs/catalina.out</span><br></pre></td></tr></table></figure>

<p>浏览器访问：<a href="http://IP:8080/jenkins" target="_blank" rel="noopener">http://IP:8080/jenkins</a></p>
<h5 id="3-6-3-部署开源站点（jspgou商城）"><a href="#3-6-3-部署开源站点（jspgou商城）" class="headerlink" title="3.6.3 部署开源站点（jspgou商城）"></a><strong>3.6.3 部署开源站点（jspgou商城）</strong></h5><p>第一：安装配置数据库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.使用mariadb</span><br><span class="line">[root@youngfit ~]# yum -y install mariadb mariadb-server</span><br><span class="line">[root@youngfit ~]# systemctl enable --now mariadb</span><br><span class="line">[root@youngfit ~]# mysql</span><br><span class="line">MariaDB [(none)]&gt; create database jspgou default charset=utf8;	//在数据库中操作，创建数据库并指定字符集</span><br><span class="line">MariaDB [(none)]&gt; flush privileges;		//(可选操作)</span><br><span class="line">exit;</span><br></pre></td></tr></table></figure>



<p>第二：jspgou商城上线</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">上传jspgou商城的代码</span><br><span class="line">[root@java-tomcat1 ~]# unzip jspgouV6.1-ROOT.zip</span><br><span class="line">[root@java-tomcat01~]# cd /usr/local/tomcat/webapps/</span><br><span class="line">[root@java-tomcat01 webapps]# rm -rf *</span><br><span class="line">[root@java-tomcat01 webapps]# cp -r ROOT/ .</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看JDBC连接数据库配置文件信息</span></span><br><span class="line">[root@java-tomcat01 webapps]# vim ROOT/WEB-INF/config/jdbc.properties</span><br><span class="line">jdbc.driverClassName=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.url=jdbc:mysql://127.0.0.1:3306/jspgou?characterEncoding=UTF-8</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=</span><br><span class="line"></span><br><span class="line">hibernate.db=mysql</span><br><span class="line">hibernate.dialect=org.hibernate.dialect.MySQLInnoDBDialect</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">将数据导入数据库:</span><br><span class="line">[root@java-tomcat1 ~]# cd DB/</span><br><span class="line">[root@java-tomcat1 DB]# ls</span><br><span class="line">jspgou.sql</span><br><span class="line">[root@java-tomcat1 DB]# mysql -uroot -p  jspgou &lt; jspgou.sql</span><br><span class="line"></span><br><span class="line">启动tomcat访问:</span><br><span class="line">[root@java-tomcat1 ~]# catalina.sh start ; tail -f /usr/local/tomcat/logs/catalina.out</span><br><span class="line">[root@java-tomcat1 ~]# netstat -lntp | grep java</span><br></pre></td></tr></table></figure>

<p>访问:<a href="http://IP:8080/" target="_blank" rel="noopener">http://IP:8080/</a></p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562343793980.png" alt="1562343793980"></p>
<p>做一遍：要求用mysql5.7（会遇到问题，百度解决），贴近企业环境</p>
<h5 id="3-6-4-Tomcat多实例配置"><a href="#3-6-4-Tomcat多实例配置" class="headerlink" title="3.6.4 Tomcat多实例配置"></a>3.6.4 Tomcat多实例配置</h5><p><strong>多实例（多进程）</strong>：同一个程序启动多次，分为两种情况:</p>
<p>第一种：一台机器跑多个站点； </p>
<p>第二种：多个机器跑一个站点多个实例，配合负载均衡;</p>
<p>1、复制程序文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat01 ~]# cd /usr/local/</span><br><span class="line">[root@java-tomcat01 local]# cp -r tomcat/ tomcat_2</span><br><span class="line">[root@java-tomcat01 local]# rm -rf /usr/local/tomcat/webapps/*</span><br><span class="line">[root@java-tomcat01 local]# rm -rf /usr/local/tomcat_2/webapps/*</span><br><span class="line">[root@java-tomcat01 local]# cp -r /opt/webapps/* /usr/local/tomcat/webapps/</span><br><span class="line">[root@java-tomcat01 local]# cp -r /opt/webapps/* /usr/local/tomcat_2/webapps/</span><br><span class="line"></span><br><span class="line">[root@java-tomcat01 local]# vim tomcat_2/conf/server.xml</span><br><span class="line">&lt;Server port="8006" shutdown="SHUTDOWN"&gt;</span><br><span class="line">    &lt;Connector port="8082" protocol="HTTP/1.1"</span><br><span class="line">    &lt;Connector port="8010" protocol="AJP/1.3" redirectPort="8443" /&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改端口，以启动多实例。多实例之间端口不能一致</span></span><br><span class="line">[root@java-tomcat1 local]# diff tomcat/conf/server.xml tomcat_2/conf/server.xml  #对比文件不同之处</span><br><span class="line">3c3</span><br><span class="line">&lt; &lt;Server port="8005" shutdown="SHUTDOWN"&gt;</span><br><span class="line">---</span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> &lt;Server port=<span class="string">"8006"</span> shutdown=<span class="string">"SHUTDOWN"</span>&gt;</span></span><br><span class="line">19c19</span><br><span class="line">&lt;     &lt;Connector port="8080" protocol="HTTP/1.1"</span><br><span class="line">---</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">     &lt;Connector port=<span class="string">"8082"</span> protocol=<span class="string">"HTTP/1.1"</span></span></span><br><span class="line">23c23</span><br><span class="line">&lt;     &lt;Connector port="8009" protocol="AJP/1.3" redirectPort="8443" /&gt;</span><br><span class="line">---</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">     &lt;Connector port=<span class="string">"8010"</span> protocol=<span class="string">"AJP/1.3"</span> redirectPort=<span class="string">"8443"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>启动tomcat多实例</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 local]# echo 8080 &gt;&gt; tomcat/webapps/ROOT/index.jsp </span><br><span class="line">[root@java-tomcat1 local]# echo 8082 &gt;&gt; tomcat_2/webapps/ROOT/index.jsp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动：</span></span><br><span class="line">[root@java-tomcat01 local]# /usr/local/tomcat/bin/startup.sh </span><br><span class="line">[root@java-tomcat01 local]# /usr/local/tomcat_2/bin/startup.sh</span><br></pre></td></tr></table></figure>

<p>检查端口查看是否启动:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat01 local]# ss -tunlp | grep java</span><br><span class="line">tcp    LISTEN     0      100    [::]:8080               [::]:*                   users:(("java",pid=2814,fd=49))</span><br><span class="line">tcp    LISTEN     0      100    [::]:8082               [::]:*                   users:(("java",pid=2869,fd=49))</span><br><span class="line">tcp    LISTEN     0      1        [::ffff:127.0.0.1]:8005               [::]:*                   users:(("java",pid=2814,fd=75))</span><br><span class="line">tcp    LISTEN     0      1        [::ffff:127.0.0.1]:8006               [::]:*                   users:(("java",pid=2869,fd=75))</span><br><span class="line">tcp    LISTEN     0      100    [::]:8009               [::]:*                   users:(("java",pid=2814,fd=54))</span><br><span class="line">tcp    LISTEN     0      100    [::]:8010               [::]:*                   users:(("java",pid=2869,fd=54))</span><br></pre></td></tr></table></figure>

<p>2、在浏览器访问，进行测试</p>
<p>检查多实例的启动</p>
<p><a href="http://IP:8080/" target="_blank" rel="noopener">http://IP:8080/</a></p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/image-20240407154854291.png" alt="image-20240407154854291"></p>
<p><a href="http://IP:8082/" target="_blank" rel="noopener">http://IP:8082/</a></p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562592140511.png" alt="1562592140511"></p>
<h4 id="3-7-tomcat反向代理集群"><a href="#3-7-tomcat反向代理集群" class="headerlink" title="3.7 tomcat反向代理集群"></a>3.7 tomcat反向代理集群</h4><p><strong>1、负载均衡器说明</strong></p>
<p>关闭防火墙和selinux</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum安装nginx</span></span><br><span class="line">[root@nginx-proxy ~]# cd /etc/yum.repos.d/</span><br><span class="line">[root@nginx-proxy yum.repos.d]# vim nginx.repo</span><br><span class="line">[nginx-stable]</span><br><span class="line">name=nginx stable repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/$releasever/$basearch/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line">[root@nginx-proxy yum.repos.d]# yum install yum-utils -y</span><br><span class="line">[root@nginx-proxy yum.repos.d]# yum install nginx -y</span><br></pre></td></tr></table></figure>

<p><strong>2、配置负载均衡器</strong></p>
<p>备份原配置文件并修改</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-proxy ~]# cd /etc/nginx/conf.d/</span><br><span class="line">[root@nginx-proxy conf.d]# cp default.conf default.conf.bak</span><br><span class="line">[root@nginx-proxy conf.d]# mv default.conf tomcat.conf</span><br><span class="line">[root@nginx-proxy conf.d]# vim tomcat.conf</span><br><span class="line">upstream testweb &#123;</span><br><span class="line">	server 192.168.50.114:8081 weight=1 max_fails=1 fail_timeout=2s;</span><br><span class="line">	server 192.168.50.114:8082 weight=1 max_fails=1 fail_timeout=2s;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    access_log  /var/log/nginx/proxy.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">       proxy_pass http://testweb;</span><br><span class="line">       proxy_set_header Host $host:$server_port;</span><br><span class="line">       proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        &#125;       </span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动nginx</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-proxy ~]# systemctl start nginx</span><br></pre></td></tr></table></figure>

<p><strong>3、在浏览器上进行访问测试</strong></p>
<p><a href="http://192.168.174.20/" target="_blank" rel="noopener">http://192.168.174.20/</a></p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562598544268.png" alt="1562598544268"></p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562598580435.png" alt="1562598580435"></p>
<h3 id="4、Tomcat相关调优"><a href="#4、Tomcat相关调优" class="headerlink" title="4、Tomcat相关调优"></a>4、Tomcat相关调优</h3><h4 id="4-1-日志格式配置"><a href="#4-1-日志格式配置" class="headerlink" title="4.1 日志格式配置"></a>4.1 日志格式配置</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 ~]# cd /data/application/tomcat/conf/</span><br><span class="line">[root@java-tomcat1 conf]# vim server.xml</span><br><span class="line">&lt;Valve className="org.apache.catalina.valves.AccessLogValve" directory="/data/www/logs"</span><br><span class="line">               prefix="jenkins-" suffix="-access_log"</span><br><span class="line">               pattern="%&#123;X-Real-IP&#125;i - %v %t &amp;quot;%r&amp;quot; - %s %b %T &amp;quot;%&#123;Referer&#125;i&amp;quot; &amp;quot;%&#123;User-Agent&#125;i&amp;quot; %a &amp;quot;-&amp;quot; &amp;quot;-&amp;quot;" /&gt;</span><br><span class="line">[root@java-tomcat1 conf]# mkdir -p /data/www</span><br><span class="line"></span><br><span class="line">日志参数解释：</span><br><span class="line">    ％a - 远程IP地址</span><br><span class="line">    ％A - 本地IP地址</span><br><span class="line">    ％b - 发送的字节数，不包括HTTP头，或“ - ”如果没有发送字节</span><br><span class="line">    ％B - 发送的字节数，不包括HTTP头</span><br><span class="line">    ％h - 远程主机名</span><br><span class="line">    ％H - 请求协议</span><br><span class="line">    ％l (小写的L)- 远程逻辑从identd的用户名（总是返回' - '）</span><br><span class="line">    ％m - 请求方法</span><br><span class="line">    ％p - 本地端口</span><br><span class="line">    ％q - 查询字符串（在前面加上一个“？”如果它存在，否则是一个空字符串</span><br><span class="line">    ％r - 第一行的要求，客户端请求的第一行，包括HTTP方法、请求URL和协议版本。例如："GET /example.html HTTP/1.1"。</span><br><span class="line">    ％s - 响应的HTTP状态代码</span><br><span class="line">    ％S - 用户会话ID</span><br><span class="line">    ％t - 日期和时间，在通用日志格式，使用指定格式（例如 %t&#123;dd/MMM/yyyy:HH:mm:ss Z&#125;）</span><br><span class="line">    ％u - 远程用户身份验证</span><br><span class="line">    ％U - 请求的URL路径</span><br><span class="line">    ％v - 本地服务器名</span><br><span class="line">    ％D - 处理请求的时间（以毫秒为单位）</span><br><span class="line">    ％T - 处理请求的时间（以秒为单位）</span><br><span class="line">    ％I （大写的i） - 当前请求的线程名称</span><br></pre></td></tr></table></figure>



<h4 id="4-2-JVM-参数优化"><a href="#4-2-JVM-参数优化" class="headerlink" title="4.2 JVM 参数优化"></a>4.2 JVM 参数优化</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 conf]# cd ../bin/</span><br><span class="line">[root@java-tomcat1 bin]# cp catalina.sh catalina.sh.bak</span><br><span class="line">[root@java-tomcat1 bin]# vim catalina.sh</span><br><span class="line">JAVA_OPTS="$JAVA_OPTS -Xms1024m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m"  #jdk1.7</span><br><span class="line">JAVA_OPTS="$JAVA_OPTS -Xms1024m -Xmx1024m -XX:MetaspaceSize=512m -XX:MaxMetaspaceSize=512m"   #jdk1.8</span><br></pre></td></tr></table></figure>

<p>这条代码是用于设置Java虚拟机（JVM）的启动参数。让我们逐步解释：</p>
<ol>
<li><p><code>JAVA_OPTS=&quot;$JAVA_OPTS -Xms1024m -Xmx1024m -XX:MetaspaceSize=512m -XX:MaxMetaspaceSize=512m&quot;</code></p>
<p>这一行代码首先将 <code>JAVA_OPTS</code> 环境变量的值设置为其当前值（如果有的话），然后添加了一系列JVM启动参数：</p>
<ul>
<li><code>-Xms1024m</code>: 指定JVM的初始堆内存大小为1024 MB。</li>
<li><code>-Xmx1024m</code>: 指定JVM的最大堆内存大小为1024 MB。</li>
<li><code>-XX:MetaspaceSize=512m</code>: 指定元数据空间（Metaspace）的初始大小为512 MB。元数据空间用于存储类的元数据信息。</li>
<li><code>-XX:MaxMetaspaceSize=512m</code>: 指定元数据空间的最大大小为512 MB。</li>
</ul>
</li>
</ol>
<h4 id="4-3-开启GC日志"><a href="#4-3-开启GC日志" class="headerlink" title="4.3 开启GC日志"></a>4.3 开启GC日志</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 bin]# vim catalina.sh</span><br><span class="line">JAVA_OPTS="$JAVA_OPTS -XX:+PrintGCDetails -XX:+PrintGCDateStamps -Xloggc:/data/logs/gc-%t.log"</span><br><span class="line"></span><br><span class="line">可选参数:</span><br><span class="line">-XX:+AggressiveOpts，加快编译。会增加编译时间和内存消耗</span><br><span class="line">-XX:+UseParallelGC，优化垃圾回收,通过多线程并行处理垃圾收集任务来减少停顿时间，从而提高应用程序的吞吐量。会导致一些额外的系统开销。</span><br><span class="line">[root@java-tomcat1 bin]# mkdir /data/logs</span><br></pre></td></tr></table></figure>

<p>这条代码是用于设置Java虚拟机（JVM）的启动参数，主要是用于配置垃圾回收（GC）日志输出。让我们逐步解释：</p>
<p>这一行代码首先将 <code>JAVA_OPTS</code> 环境变量的值设置为其当前值（如果有的话），然后添加了一系列JVM启动参数：</p>
<ul>
<li><code>-XX:+PrintGCDetails</code>: 启用GC日志详细输出，包括每次GC事件的详细信息，如GC类型、GC前后堆内存情况等。</li>
<li><code>-XX:+PrintGCDateStamps</code>: 启用GC日志输出时间戳，每条GC日志输出的前缀将包含日期和时间信息。</li>
<li><code>-Xloggc:/data/logs/gc-%t.log</code>: 指定GC日志文件的输出路径和文件名格式。<code>/data/logs/gc-%t.log</code> 中的 <code>%t</code> 将会被替换为当前日期时间的时间戳。</li>
</ul>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562242242126.png" alt="1562242242126"></p>
<h4 id="4-4-开启JMX端口便于监控"><a href="#4-4-开启JMX端口便于监控" class="headerlink" title="4.4 开启JMX端口便于监控"></a>4.4 开启JMX端口便于监控</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> vim catalina.sh</span></span><br><span class="line">CATALINA_OPTS="$CATALINA_OPTS -Dcom.sun.management.jmxremote </span><br><span class="line">-Dcom.sun.management.jmxremote.port=10028 </span><br><span class="line">-Dcom.sun.management.jmxremote.authenticate=false</span><br><span class="line">-Dcom.sun.management.jmxremote.ssl=false </span><br><span class="line">-Djava.rmi.server.hostname=java69-matrix.zeus.lianjia.com"</span><br></pre></td></tr></table></figure>

<p>这条代码是用于配置 Tomcat 服务器的启动参数，具体解释如下：</p>
<ol>
<li><p><code>-Dcom.sun.management.jmxremote</code>：启用 JMX（Java Management Extensions）远程管理功能。这允许外部监控程序（如JConsole或VisualVM）连接到Tomcat服务器并监视其状态和性能。</p>
</li>
<li><p><code>-Dcom.sun.management.jmxremote.port=10028</code>：指定 JMX 远程管理的端口号为 10028。监控程序将使用该端口连接到Tomcat服务器。</p>
</li>
<li><p><code>-Dcom.sun.management.jmxremote.authenticate=false</code>：禁用JMX远程管理的认证功能，允许任何可以连接到服务器的客户端都可以进行JMX操作。</p>
</li>
<li><p><code>-Dcom.sun.management.jmxremote.ssl=false</code>：禁用JMX远程管理的SSL安全传输，以简化连接配置。在此配置下，连接不会通过SSL进行加密。</p>
</li>
<li><p><code>-Djava.rmi.server.hostname=java69-matrix.zeus.lianjia.com</code>：指定 RMI（Remote Method Invocation）服务器的主机名或IP地址。在JMX远程管理中，这将用于通知监控程序Tomcat服务器的位置。</p>
</li>
</ol>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562242650648.png" alt="1562242650648"></p>
<h4 id="4-5-取消JVM-的默认DNS缓存时间"><a href="#4-5-取消JVM-的默认DNS缓存时间" class="headerlink" title="4.5 取消JVM 的默认DNS缓存时间"></a>4.5 取消JVM 的默认DNS缓存时间</h4><p>不缓存DNS记录，避免DNS解析更改后要重启JVM虚拟机</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> catalina.sh  ---添加如下内容</span></span><br><span class="line">CATALINA_OPTS="$CATALINA_OPTS -Dsun.net.inetaddr.ttl=0 -Dsun.net.inetaddr.negative.ttl=0</span><br></pre></td></tr></table></figure>

<ol>
<li><code>-Dsun.net.inetaddr.ttl=0</code>：这个系统属性设置了网络地址（InetAddress）的生存时间（TTL，Time-To-Live）为0。TTL用于指定网络数据包在网络中允许存在的时间。将TTL设置为0意味着数据包一旦到达目的地，即被丢弃，不会被路由到其他节点。在这个设置下，网络地址的生存时间被设置为尽可能短，可以避免一些不必要的网络传输。</li>
<li><code>-Dsun.net.inetaddr.negative.ttl=0</code>：这个系统属性设置了负缓存的生存时间为0。负缓存用于缓存DNS查询的失败结果，以避免频繁地重新查询。将负缓存的生存时间设置为0意味着失败的DNS查询结果不会被缓存，每次查询都会重新进行。这可以确保Tomcat服务器及时获取到最新的DNS解析结果，而不会受到旧缓存的影响。</li>
</ol>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/1562243085427.png" alt="1562243085427"></p>
<h3 id="5、JVM-运维实用排障工具"><a href="#5、JVM-运维实用排障工具" class="headerlink" title="5、JVM 运维实用排障工具"></a>5、JVM 运维实用排障工具</h3><h4 id="5-1-jps"><a href="#5-1-jps" class="headerlink" title="5.1 jps"></a><strong>5.1 jps</strong></h4><p>​    <code>jps</code> 是 Java Virtual Machine Process Status Tool 的缩写，用于列出当前系统中正在运行的 Java 进程（Java虚拟机实例）。<code>jps</code> 工具在 JDK 的 <code>bin</code> 目录下，可以通过命令行运行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">用来查看Java进程的具体状态, 包括进程ID，进程启动的路径及启动参数等等，与unix上的ps类似，只不过jps是用来显示java进程，可以把jps理解为ps的一个子集。</span><br><span class="line">常用参数如下:</span><br><span class="line"><span class="meta">#</span><span class="bash"> -q：只输出java进程pid</span></span><br><span class="line">[root@java-tomcat01 ~]# jps -q</span><br><span class="line">3267</span><br><span class="line">3386</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -m：输出传递给main方法的参数，如果是内嵌的JVM则输出为null</span></span><br><span class="line">[root@java-tomcat01 ~]# jps -m</span><br><span class="line">3267 Bootstrap start</span><br><span class="line">3398 Jps -m</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -l：输出完全的包名，应用主类名，jar的完全路径名</span></span><br><span class="line">[root@java-tomcat01 ~]# jps -l</span><br><span class="line">3410 sun.tools.jps.Jps</span><br><span class="line">3267 org.apache.catalina.startup.Bootstrap</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> -v：显示java服务启动时的相关参数和启动命令或脚本</span></span><br><span class="line">[root@java-tomcat01 ~]# jps -v</span><br><span class="line">3267 Bootstrap -Djava.util.logging.config.file=/usr/local/tomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -Dcatalina.base=/usr/local/tomcat -Dcatalina.home=/usr/local/tomcat -Djava.io.tmpdir=/usr/local/tomcat/temp</span><br><span class="line">3422 Jps -Dapplication.home=/usr/local/jdk1.8.0_211 -Xms8m</span><br><span class="line"></span><br><span class="line">注意: 使用jps 时的运行账户要和JVM 虚拟机启动的账户一致。若启动JVM虚拟机是运行的账户为www，那使用jps指令时，也要使用www 用户去指定。 sudo -u www jps</span><br></pre></td></tr></table></figure>



<h4 id="5-2-jstack"><a href="#5-2-jstack" class="headerlink" title="5.2 jstack"></a>5.2 jstack</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jstack用于打印出给定的java进程ID或core file或远程调试服务的Java堆栈信息。如果现在运行的java程序呈现hung的状态，jstack是非常有用的。此信息通常在运维的过程中被保存起来(保存故障现场)，以供RD们去分析故障。</span><br><span class="line">常用参数如下:</span><br><span class="line">jstack &lt;pid&gt;</span><br><span class="line">jstack [-l] &lt;pid&gt; &#x2F;&#x2F;长列表. 打印关于锁的附加信息</span><br><span class="line">jstack [-F] &lt;pid&gt; &#x2F;&#x2F;当’jstack [-l] pid’没有响应的时候强制打印栈信息</span><br></pre></td></tr></table></figure>

<p>Example</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 打印JVM 的堆栈信息，以供问题排查</span><br><span class="line">[root@mouse03 ~]# jstack -F 38360 &gt; /tmp/jstack.log</span><br></pre></td></tr></table></figure>



<h3 id="6、Tomcat安全优化"><a href="#6、Tomcat安全优化" class="headerlink" title="6、Tomcat安全优化"></a>6、Tomcat安全优化</h3><h4 id="6-1-telnet管理端口保护（强制）"><a href="#6-1-telnet管理端口保护（强制）" class="headerlink" title="6.1 telnet管理端口保护（强制）"></a>6.1 telnet管理端口保护（强制）</h4><table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>配置内容及说明</strong></th>
<th><strong>标准配置</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>telnet管理端口保护</td>
<td>1.修改默认的8005管理端口为不易猜测的端口（大于1024）；2.修改SHUTDOWN指令为其他字符串；</td>
<td><Server port="**8527**" shutdown="**dangerous**"></Server></td>
<td>1.以上配置项的配置内容只是建议配置，可以按照服务实际情况进行合理配置，但要求端口配置在<strong>8000~8999</strong>之间；</td>
</tr>
</tbody></table>
<h4 id="6-2-ajp连接端口保护（推荐）"><a href="#6-2-ajp连接端口保护（推荐）" class="headerlink" title="6.2  ajp连接端口保护（推荐）"></a>6.2  ajp连接端口保护（推荐）</h4><table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>配置内容及说明</strong></th>
<th><strong>标准配置</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>Ajp 连接端口保护</td>
<td>1.修改默认的ajp 8009端口为不易冲突的大于1024端口；2.通过iptables规则限制ajp端口访问的权限仅为线上机器；</td>
<td>&lt;Connector port=”<strong>8528</strong>“protocol=”AJP/1.3” /&gt;</td>
<td>以上配置项的配置内容仅为建议配置，请按照服务实际情况进行合理配置，但要求端口配置在<strong>8000~8999</strong>之间；；保护此端口的目的在于防止线下的测试流量被mod_jk转发至线上tomcat服务器；</td>
</tr>
</tbody></table>
<h4 id="6-3-降权启动（强制）"><a href="#6-3-降权启动（强制）" class="headerlink" title="6.3 降权启动（强制）"></a>6.3 降权启动（强制）</h4><table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>配置内容及说明</strong></th>
<th><strong>标准配置</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>降权启动</td>
<td>1.tomcat启动用户权限必须为非root权限，尽量降低tomcat启动用户的目录访问权限；2.如需直接对外使用80端口，可通过普通账号启动后，配置iptables规则进行转发；</td>
<td></td>
<td>避免一旦tomcat 服务被入侵，黑客直接获取高级用户权限危害整个server的安全；</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@java-tomcat1 ~]# useradd tomcat</span><br><span class="line">[root@java-tomcat1 ~]# chown tomcat.tomcat /usr/local/tomcat/ -R</span><br><span class="line">[root@java-tomcat1 ~]# su -c '/usr/local/tomcat/bin/startup.sh' tomcat </span><br><span class="line">Using CATALINA_BASE:   /data/application/tomcat</span><br><span class="line">Using CATALINA_HOME:   /data/application/tomcat</span><br><span class="line">Using CATALINA_TMPDIR: /data/application/tomcat/temp</span><br><span class="line">Using JRE_HOME:        /usr/local/java</span><br><span class="line">Using CLASSPATH:       /data/application/tomcat/bin/bootstrap.jar:/data/application/tomcat/bin/tomcat-juli.jar</span><br><span class="line">Tomcat started.</span><br><span class="line">[root@java-tomcat1 ~]# ps -ef | grep tomcat </span><br><span class="line">tomcat     1065      1 64 20:33 ?        00:00:06 /usr/local/java/bin/java -Djava.util.logging.config.file=/data/applicationtomcat/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Dignore.endorsed.dirs= -classpath /data/application/tomcat/bin/bootstrap.jar:/data/application/tomcat/bin/tomcat-juli.jar -Dcatalina.base=/data/application/tomcat -Dcatalina.home=/data/application/tomcat -Djava.io.tmpdir=/data/application/tomcat/temp org.apache.catalina.startup.Bootstrap start</span><br><span class="line">root       1112   1027  0 20:33 pts/0    00:00:00 grep --color=auto tomcat</span><br></pre></td></tr></table></figure>

<h4 id="6-4-起停脚本权限回收（推荐）"><a href="#6-4-起停脚本权限回收（推荐）" class="headerlink" title="6.4 起停脚本权限回收（推荐）"></a><strong>6.4 起停脚本权限回收（推荐）</strong></h4><table>
<thead>
<tr>
<th><strong>类别</strong></th>
<th><strong>配置内容及说明</strong></th>
<th><strong>标准配置或操作</strong></th>
<th><strong>备注</strong></th>
</tr>
</thead>
<tbody><tr>
<td>起停脚本权限回收</td>
<td>去除其他用户对Tomcat的bin目录下shutdown.sh、startup.sh、catalina.sh的可执行权限；</td>
<td>chmod -R 744 tomcat/bin/*</td>
<td>防止其他用户有起停线上Tomcat的权限；</td>
</tr>
</tbody></table>
<h4 id><a href="#" class="headerlink" title></a></h4><h3 id="7、Tomcat性能优化"><a href="#7、Tomcat性能优化" class="headerlink" title="7、Tomcat性能优化"></a>7、Tomcat性能优化</h3><p><strong>上策：优化代码</strong></p>
<p>   该项需要开发经验足够丰富，对开发人员要求较高</p>
<p><strong>中策：jvm优化机制垃圾回收机制</strong> <strong>把不需要的内存回收</strong></p>
<p>优化jvm–优化垃圾回收策略</p>
<p>优化catalina.sh配置文件。在catalina.sh配置文件中添加以下代码</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> tomcat分配1G内存模板</span></span><br><span class="line">JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 -server -Xms1024m -Xmx1024m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:PermSize=512m -XX:MaxPermSize=512m"     </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 重启服务</span></span><br><span class="line">su -c '/home/tomcat/tomcat8_1/bin/shutdown.sh' tomcat</span><br><span class="line">su -c '/home/tomcat/tomcat8_1/bin/startup.sh' tomcat</span><br></pre></td></tr></table></figure>

<p><strong>下策：加足够大的内存</strong></p>
<p>该项的资金投入较大</p>
<p><strong>下下策：每天0点定时重启tomcat</strong></p>
<p>使用较为广泛</p>
<h3 id="8、扩展知识（面试会问）"><a href="#8、扩展知识（面试会问）" class="headerlink" title="8、扩展知识（面试会问）"></a>8、扩展知识（面试会问）</h3><p>WebSphere是 IBM 的软件平台。它包含了编写、运行和监视全天候的工业强度的随需应变 Web 应用程序和跨平台、跨产品解决方案所需要的整个中间件基础设施，如服务器、服务和工具。WebSphere 提供了可靠、灵活和健壮的软件。</p>
<p>WebLogic是美国Oracle公司出品的一个application server，确切的说是一个基于JAVAEE架构的中间件，WebLogic是用于开发、集成、部署和管理大型分布式Web应用、网络应用和数据库应用的Java应用服务器。将Java的动态功能和Java Enterprise标准的安全性引入大型网络应用的开发、集成、部署和管理之中。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">L66</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://l66stbz.github.io/2024/08/08/Tomcat%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/">https://l66stbz.github.io/2024/08/08/Tomcat%E8%BF%90%E7%BB%B4%E5%AE%9E%E6%88%98/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://l66stbz.github.io" target="_blank">L66</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/tomcat/">tomcat</a></div><div class="post_share"><div class="social-share" data-image="https://l66stbz.github.io/2024/09/09/若依项目动静分离/若依项目动静分离项目实现/6.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2024/08/09/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_01/"><img class="prev_cover" src="https://l66stbz.github.io/2024/08/09/nginx详解+实操_01/1.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">nginx详解+实操_01</div></div></a></div><div class="next-post pull_right"><a href="/2024/07/31/Linux%E5%86%85%E6%A0%B8%E5%8D%87%E7%BA%A7/"><img class="next_cover" src="https://l66stbz.github.io/2024/07/31/Linux内核升级/1.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux内核升级</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2024/05/20/基于云部署tomcat和jdk使jspgou项目上线/" title="基于云部署tomcat和jdk使jspgou项目上线"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/20/基于云部署tomcat和jdk使jspgou项目上线/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-20</div><div class="relatedPosts_title">基于云部署tomcat和jdk使jspgou项目上线</div></div></a></div><div class="relatedPosts_item"><a href="/2024/05/17/安装zabbix前端包问题/" title="安装zabbix前端包问题"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/17/安装zabbix前端包问题/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-17</div><div class="relatedPosts_title">安装zabbix前端包问题</div></div></a></div><div class="relatedPosts_item"><a href="/2024/07/31/Linux内核升级/" title="Linux内核升级"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/07/31/Linux内核升级/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-07-31</div><div class="relatedPosts_title">Linux内核升级</div></div></a></div><div class="relatedPosts_item"><a href="/2024/07/27/Mysql高可用-MHA/" title="Mysql高可用-MHA"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/07/27/Mysql高可用-MHA/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-07-27</div><div class="relatedPosts_title">Mysql高可用-MHA</div></div></a></div><div class="relatedPosts_item"><a href="/2024/08/16/RabbitMQ消息队列/" title="RabbitMQ消息队列"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/08/16/RabbitMQ消息队列/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-08-16</div><div class="relatedPosts_title">RabbitMQ消息队列</div></div></a></div><div class="relatedPosts_item"><a href="/2024/05/21/Keepalived/" title="Keepalived"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/21/Keepalived/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-21</div><div class="relatedPosts_title">Keepalived</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By L66</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="/js/third-party/click_heart.js"></script></body></html>