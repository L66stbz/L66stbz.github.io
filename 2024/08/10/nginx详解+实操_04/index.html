<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>nginx详解+实操_04 | L66</title><meta name="description" content="[TOC] HTTPS 介绍HTTPS（全称：HyperText Transfer Protocol over Secure Socket Layer），其实 HTTPS 并不是一个新鲜协议，Google 很早就开始启用了，初衷是为了保证数据安全。 近些年，Google、Baidu、Facebook 等这样的互联网巨头，不谋而合地开始大力推行 HTTPS， 国内外的大型互联网公司很多也都已经启用了"><meta name="keywords" content="Linux,Nginx"><meta name="author" content="L66"><meta name="copyright" content="L66"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/3.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="nginx详解+实操_04"><meta name="twitter:description" content="[TOC] HTTPS 介绍HTTPS（全称：HyperText Transfer Protocol over Secure Socket Layer），其实 HTTPS 并不是一个新鲜协议，Google 很早就开始启用了，初衷是为了保证数据安全。 近些年，Google、Baidu、Facebook 等这样的互联网巨头，不谋而合地开始大力推行 HTTPS， 国内外的大型互联网公司很多也都已经启用了"><meta name="twitter:image" content="https://l66stbz.github.io/2024/08/10/nginx详解+实操_04/1.png"><meta property="og:type" content="article"><meta property="og:title" content="nginx详解+实操_04"><meta property="og:url" content="https://l66stbz.github.io/2024/08/10/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_04/"><meta property="og:site_name" content="L66"><meta property="og:description" content="[TOC] HTTPS 介绍HTTPS（全称：HyperText Transfer Protocol over Secure Socket Layer），其实 HTTPS 并不是一个新鲜协议，Google 很早就开始启用了，初衷是为了保证数据安全。 近些年，Google、Baidu、Facebook 等这样的互联网巨头，不谋而合地开始大力推行 HTTPS， 国内外的大型互联网公司很多也都已经启用了"><meta property="og:image" content="https://l66stbz.github.io/2024/08/10/nginx详解+实操_04/1.png"><meta property="article:published_time" content="2024-08-10T15:50:00.000Z"><meta property="article:modified_time" content="2024-08-10T10:29:40.342Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://l66stbz.github.io/2024/08/10/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_04/"><link rel="prev" title="负载均衡-LVS" href="https://l66stbz.github.io/2024/08/11/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-LVS/"><link rel="next" title="nginx详解+实操_03" href="https://l66stbz.github.io/2024/08/10/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_03/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/gh/radium-bit/res@master/live2d/autoload.js" async></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="L66" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/2.jpg" onerror="onerror=null;src='/img/2.jpg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">52</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">33</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Photo</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTPS-介绍"><span class="toc-number">1.</span> <span class="toc-text">HTTPS 介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1、加密算法"><span class="toc-number">2.</span> <span class="toc-text">1、加密算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-对称加密"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 对称加密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-非对称加密-—-公钥加密，私钥解密"><span class="toc-number">2.2.</span> <span class="toc-text">1.2  非对称加密 —-  公钥加密，私钥解密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-哈希算法"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 哈希算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-数字签名"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 数字签名</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、HTTPS-协议介绍"><span class="toc-number">3.</span> <span class="toc-text">2、HTTPS 协议介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、HTTPS-原理"><span class="toc-number">4.</span> <span class="toc-text">3、HTTPS 原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-HTTP-访问过程"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 HTTP 访问过程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Https访问流程"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 Https访问流程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-HTTPS相比HTTP的优势"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 HTTPS相比HTTP的优势</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-HTTPS-总结"><span class="toc-number">4.4.</span> <span class="toc-text">3.4 HTTPS 总结</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-HTTPS-缺点"><span class="toc-number">4.5.</span> <span class="toc-text">3.5 HTTPS 缺点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、Nginx-性能优化"><span class="toc-number">5.</span> <span class="toc-text">4、Nginx 性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-当前系统结构瓶颈"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 当前系统结构瓶颈</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-了解业务模式"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 了解业务模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-性能与安全"><span class="toc-number">5.3.</span> <span class="toc-text">4.3 性能与安全</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-系统与Nginx性能优化"><span class="toc-number">5.4.</span> <span class="toc-text">4.4 系统与Nginx性能优化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-1-文件句柄"><span class="toc-number">5.4.1.</span> <span class="toc-text">4.4.1 文件句柄</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-2-设置方式"><span class="toc-number">5.4.2.</span> <span class="toc-text">4.4.2 设置方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-3-系统全局性修改和用户局部性修改"><span class="toc-number">5.4.3.</span> <span class="toc-text">4.4.3 系统全局性修改和用户局部性修改</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-cpu的亲和配置"><span class="toc-number">5.5.</span> <span class="toc-text">4.5 cpu的亲和配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-1-配置worker-processes"><span class="toc-number">5.5.1.</span> <span class="toc-text">4.5.1 配置worker_processes</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-nginx通用配置优化"><span class="toc-number">5.6.</span> <span class="toc-text">4.6 nginx通用配置优化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、ab接口压力测试工具-扩展"><span class="toc-number">6.</span> <span class="toc-text">5、ab接口压力测试工具(扩展)</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://l66stbz.github.io/2024/08/10/nginx详解+实操_04/1.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">L66</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Photo</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">nginx详解+实操_04</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2024-08-10 23:50:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2024-08-10</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2024-08-10 18:29:40"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2024-08-10</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>[TOC]</p>
<h3 id="HTTPS-介绍"><a href="#HTTPS-介绍" class="headerlink" title="HTTPS 介绍"></a>HTTPS 介绍</h3><p>HTTPS（全称：HyperText Transfer Protocol over Secure Socket Layer），其实 HTTPS 并不是一个新鲜协议，Google 很早就开始启用了，初衷是为了保证数据安全。 近些年，Google、Baidu、Facebook 等这样的互联网巨头，不谋而合地开始大力推行 HTTPS， 国内外的大型互联网公司很多也都已经启用了全站 HTTPS，这也是未来互联网发展的趋势。</p>
<p>HTTPS是基于HTTP的安全版。以下是HTTPS的一些关键特点：</p>
<ol>
<li><strong>保密性</strong>：通过<code>SSL/TLS</code>协议和<code>加密算法</code>，HTTPS保证了数据在传输过程中的<code>保密性</code>，防止数据<code>被窃听</code>。</li>
<li><strong>完整性</strong>：HTTPS确保数据在传输过程中不被篡改，保持数据的<code>完整性</code>。</li>
<li><strong>认证</strong>：通过数字证书，HTTPS能够验证通信双方的身份，防止<code>身份伪造</code>。</li>
<li><strong>加密算法</strong>：HTTPS使用了混合加密算法，即结合了对称加密和非对称加密的优势。。</li>
<li><strong>握手过程</strong>：在数据传输开始前，HTTPS会进行一个<code>SSL/TLS</code>握手过程，以确保通信双方协商一致的加密参数和密钥。</li>
<li><strong>性能影响</strong>：虽然HTTPS提供了更高的安全性，但它也可能会对性能产生一定影响，比如增加数据传输的开销。然而，随着技术的进步，这种影响正在逐渐减小。</li>
</ol>
<p>HTTPS是一个重要的网络安全措施，它通过<code>加密</code>和<code>身份验证机制</code>来保护数据的安全，防止数据泄露和中间人攻击。随着技术的发展和安全需求的增加，HTTPS已经成为互联网通信的标准做法。</p>
<h3 id="1、加密算法"><a href="#1、加密算法" class="headerlink" title="1、加密算法"></a>1、加密算法</h3><h4 id="1-1-对称加密"><a href="#1-1-对称加密" class="headerlink" title="1.1 对称加密"></a>1.1 <code>对称加密</code></h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A要给B发送数据---&gt;A做一个对称密钥---&gt;使用密钥给文件加密---&gt;发送加密以后的文件和钥匙---&gt;B拿钥匙解密---&gt;加密和解密都是使用的同一个密钥。</span><br></pre></td></tr></table></figure>

<p><strong>对称加密的过程涉及使用相同的密钥进行数据的加密和解密</strong>。</p>
<p>首先，对称加密也称为<code>私钥加密</code>，是一种加密方法，其中发送方和接收方使用同一个密钥来进行数据的加密和解密。这种方法的算法是公开的，而密钥则是保密的，需要通过安全的方式共享给通信的双方。其具有以下特点：</p>
<ul>
<li><strong>加密过程</strong>：在加密阶段，发送方会使用特定的加密算法和共享的密钥（私钥）将明文（原始数据）转换成密文（加密后的数据）。这个过程可以表示为：明文 + 加密算法 + 私钥 =&gt; 密文。</li>
<li><strong>解密过程</strong>：接收方在收到密文后，使用相同的解密算法和密钥将密文还原成明文。解密过程可以表示为：密文 + 解密算法 + 私钥 =&gt; 明文。</li>
</ul>
<p>此外，由于加密和解密使用的是<code>同一个密钥</code>，因此这种加密方式称为<code>对称加密</code>。这种方法的优点是<code>加密和解密</code>速度快，适合对大量数据进行加密。然而，它的缺点在于密钥的安全管理较为困难，因为如果密钥被泄露，那么加密的数据就可能被破解。</p>
<h4 id="1-2-非对称加密-—-公钥加密，私钥解密"><a href="#1-2-非对称加密-—-公钥加密，私钥解密" class="headerlink" title="1.2  非对称加密 —-  公钥加密，私钥解密"></a>1.2  非对称加密 —-  公钥加密，私钥解密</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A要给B发送数据---&gt;B做一对非对称的密钥（公钥、私钥）---&gt;发送公钥给A---&gt;A拿公钥对数据进行加密---&gt;发送加密后的数据给B---&gt;B拿私钥解密</span><br></pre></td></tr></table></figure>

<p>非对称加密的过程涉及使用一对密钥，即公钥和私钥，其中公钥用于<code>加密数据</code>，私钥用于<code>解密数据</code>。以下是非对称加密的主要步骤：</p>
<ol>
<li><strong>密钥生成</strong>：需要生成<code>一对密钥</code>，通常通过计算得到一个公钥和一个私钥。私钥必须<code>保密</code>，而公钥可以安全地公开分发给客户端。</li>
<li><strong>加密过程</strong>：当需要向某人发送加密信息时，<code>发送方</code>会使用<code>接收方</code>的公钥对信息进行加密。这意味着只有拥有对应私钥的接收方才能解密这些信息。</li>
<li><strong>解密过程</strong>：接收方收到加密信息后，将使用其<code>私钥</code>对其<code>进行解密</code>，从而获得原始信息。由于私钥是<code>保密</code>的，因此即使信息在传输过程中被拦截，没有私钥的人也无法读取内容。</li>
<li><strong>安全性</strong>：非对称加密的一个关键优势是解决了密钥配送问题，即不需要通过不安全的通道发送密钥给对方。这是因为即使公钥被泄露，没有对应的私钥也无法解密信息。</li>
<li><strong>性能考虑</strong>：非对称加密的处理速度通常远<code>低于</code>对称加密，因此它不适合用于加密大量数据。</li>
</ol>
<p>非对称加密提供了一种在<code>不安全的环境</code>中安全交换信息的方法，尽管它的性能不如对称加密，但其在保护数据传输的安全性方面发挥着至关重要的作用。</p>
<h4 id="1-3-哈希算法"><a href="#1-3-哈希算法" class="headerlink" title="1.3 哈希算法"></a>1.3 哈希算法</h4><p>将任意长度的信息转换为较短的固定长度的值，通常其长度要比信息小得多。<strong>它将任意长度的输入数据映射为固定长度输出的数学计算机程序，具有不可逆性、<code>唯一性</code>和高效性等特点</strong>。</p>
<p>例如：<code>/etc/shadow文件中的用户密码</code></p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/202405101851172.png" alt="image-20240510185105065"></p>
<ul>
<li><strong>随机性</strong>：看起来是随机的，以减少潜在的模式识别攻击。</li>
<li><strong>固定长度</strong>：无论输入数据的长度如何，输出的散列值长度总是固定的。</li>
</ul>
<p>例如：MD5 等</p>
<h4 id="1-4-数字签名"><a href="#1-4-数字签名" class="headerlink" title="1.4 数字签名"></a>1.4 数字签名</h4><p><strong>数字签名是一种电子签名技术，它利用<code>非对称加密</code>和数字摘要技术来验证信息的真实性和完整性</strong>。简单认为人民币上的一道防伪线。</p>
<p>数字签名的核心在于使用一对非对称密钥，即公钥和私钥。<code>私钥用于生成签名，而公钥用于验证签名</code>。这种机制确保了信息的发送者身份可以被验证，并且信息在传输过程中未被篡改。以下是数字签名的主要特点和功能：</p>
<p>首先，<strong>数字签名能够验证消息或信息确实来自于发送方</strong>。在HTTPS中，当客户端与服务器进行通信时，服务器会提供一个包含数字签名的证书。这个证书由受信任的第三方机构（如证书颁发机构）签发，并且包含了服务器的公钥和身份信息。客户端会使用证书颁发机构的公钥来验证服务器证书的数字签名，确保证书未被篡改，并且确实是由证书颁发机构授权的服务器所发出的。</p>
<p>其次，<strong>数字签名还用于确保数据在传输过程中的完整性</strong>。当数据在网络中传输时，可能会被第三方截获并篡改。通过使用<code>哈希函数</code>对数据生成<code>摘要</code>，并用私钥加密这个摘要，形成了数字签名。接收方在收到数据后，会用同样的哈希函数计算数据摘要，并用发送方的公钥解密数字签名得到原始摘要，通过比对这两个摘要，可以确认数据是否在传输过程中被篡改。</p>
<p>此外，数字签名的使用还有助于防止中间人攻击，即攻击者试图在客户端和服务器之间插入自己的通信，以截获或篡改信息。HTTPS协议通过结合数字签名和SSL/TLS协议，为客户端和服务器之间的通信提供了加密通道，确保了数据传输的安全性。</p>
<p>数字签名在HTTPS协议中扮演着至关重要的角色，它不仅帮助用户验证他们正在与正确的服务器通信，而且还确保了数据在传输过程中的安全和完整。这些机制共同作用，使得HTTPS成为一种安全可靠的通信协议。</p>
<hr>
<h3 id="2、HTTPS-协议介绍"><a href="#2、HTTPS-协议介绍" class="headerlink" title="2、HTTPS 协议介绍"></a>2、HTTPS 协议介绍</h3><p>HTTP 协议（Hyper Text Transfer Protocol，<code>超文本传输协议</code>）：是客户端浏览器或其他程序与Web服务器之间的应用层通信协议 。</p>
<ul>
<li>HTTPS 协议（HyperText Transfer Protocol over Secure Socket Layer）：可以理解为<code>HTTP+SSL/TLS</code>， 即 HTTP 下加入 SSL 层，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL，用于安全的 HTTP 数据传输。</li>
</ul>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/202405101936792.png" alt="1562050089966"></p>
<ul>
<li><p>如上图所示 HTTPS 相比 HTTP 多了一层 SSL/TLS</p>
<p><strong>SSL/TLS :SSL(Secure Sockets Layer <code>安全套接层</code>),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在传输层为数据通讯进行加密提供安全支持。</strong>     </p>
<p><strong>SSL协议可分为两层：</strong></p>
</li>
<li><p><code>SSL握手协议</code>（SSL Handshake Protocol）：它建立在SSL记录协议之上，用于在实际的数据传输开始前，通讯双方进行<code>身份认证</code>、协商加密算法、<code>交换加密密钥</code>等。<strong>相当于连接</strong></p>
</li>
<li><p><code>SSL记录协议</code>（SSL Record Protocol）：它建立在可靠的<code>传输协议（如TCP）</code>之上，为高层协议提供<code>数据封装</code>、<code>压缩</code>、<code>加密</code>等基本功能的支持。 <strong>相当于通信</strong> </p>
</li>
</ul>
<p><strong>SSL协议的工作原理是：</strong></p>
<ul>
<li>在<code>传输层</code>对数据进行<code>加密</code>，以保护所有应用层协议的数据<code>传输安全</code>。</li>
<li>使用公开密钥和私有密钥两种加密方法，其中公钥用于加密数据，私钥用于解密数据。</li>
<li>在应用层协议通信之前完成加密算法、通信密钥的协商以及服务器认证工作，之后应用层协议所传送的数据都会被加密。</li>
</ul>
<p><strong>SSL协议提供的服务主要有：</strong> </p>
<ul>
<li>身份认证和数据加密。保证数据<code>完整性</code>；</li>
<li><code>认证用户</code>和服务器，确保数据发送到正确的客户机和服务器；</li>
<li>加密数据以防止数据中途被窃取后，数据泄露和篡改；</li>
<li>维护数据的完整性，确保数据在传输过程中不被改变。         </li>
</ul>
<h3 id="3、HTTPS-原理"><a href="#3、HTTPS-原理" class="headerlink" title="3、HTTPS 原理"></a>3、HTTPS 原理</h3><h4 id="3-1-HTTP-访问过程"><a href="#3-1-HTTP-访问过程" class="headerlink" title="3.1 HTTP 访问过程"></a>3.1 HTTP 访问过程</h4><p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/202405101918348.png" alt="1562050123147"></p>
<p>如上图所示，HTTP请求过程中，客户端与服务器之间没有任何身份确认的过程，数据全部明文传输，“<code>裸奔</code>”在互联网上，所以很容易遭到黑客的攻击，如下：</p>
<p><img src="https://hjmimage.oss-cn-zhangjiakou.aliyuncs.com/202405101936630.png" alt="1562050246969"></p>
<p>可以看到，客户端发出的请求很容易被黑客截获，如果此时黑客冒充服务器，则其可返回任意信息给客户端，而不被客户端察觉。</p>
<p><strong>所以 HTTP 传输面临的风险有：</strong></p>
<ul>
<li><code>窃听风险</code>：黑客可以获知通信内容。</li>
<li><code>篡改风险</code>：黑客可以修改通信内容。<code>冒充风险</code>：黑客可以冒充他人身份参与通信。</li>
</ul>
<h4 id="3-2-Https访问流程"><a href="#3-2-Https访问流程" class="headerlink" title="3.2 Https访问流程"></a>3.2 Https访问流程</h4><p>  <strong>客户端在接受到服务端发来的SSL证书时，会对证书的真伪进行校验，以浏览器为例说明如下：</strong></p>
<p>（1）首先浏览器读取证书中的证书所有者、有效期等信息进行校验</p>
<p>（2）浏览器开始查找操作系统中已内置的受信任的证书发布机构CA，与服务器发来的证书中的颁发者CA比对，用于校验证书是否为合法机构颁发</p>
<p>（3）如果找不到，浏览器就会报错，说明服务器发来的证书是不可信任的。</p>
<p>（4）如果找到，那么浏览器就会从操作系统中取出颁发者CA 的公钥，然后对服务器发来的证书里面的签名进行解密</p>
<p>（5）浏览器使用相同的hash算法计算出服务器发来的证书的hash值，将这个计算的hash值与证书中签名做对比</p>
<p>（6）对比结果一致，则证明服务器发来的证书合法，没有被冒充</p>
<p>（7）此时浏览器就可以读取证书中的公钥，用于后续加密了</p>
<p>  (8）client与web协商对称加密算法，client生成一个对称加密密钥并使用web公钥加密，发送给web服务器，web服务器使用web私钥解密</p>
<p>  (9)使用对称加密密钥传输数据，并校验数据的完整性</p>
<h4 id="3-3-HTTPS相比HTTP的优势"><a href="#3-3-HTTPS相比HTTP的优势" class="headerlink" title="3.3 HTTPS相比HTTP的优势"></a>3.3 HTTPS相比HTTP的优势</h4><p>相比HTTP，HTTPS 传输更加安全， 所有信息都是加密传播，黑客无法窃听。具有校验机制，一旦被篡改，通信双方会立刻发现。 配备身份证书，防止身份被冒充。 </p>
<h4 id="3-4-HTTPS-总结"><a href="#3-4-HTTPS-总结" class="headerlink" title="3.4 HTTPS 总结"></a>3.4 HTTPS 总结</h4><p><strong>综上所述，相比 HTTP 协议，HTTPS 协议增加了很多握手、加密解密等流程，虽然过程很复杂，但其可以保证数据传输的安全。</strong></p>
<h4 id="3-5-HTTPS-缺点"><a href="#3-5-HTTPS-缺点" class="headerlink" title="3.5 HTTPS 缺点"></a>3.5 <strong>HTTPS 缺点</strong></h4><ol>
<li>SSL 证书费用很高，以及其在服务器上的部署、更新维护非常繁琐</li>
<li>HTTPS 降低用户访问速度（多次握手）</li>
<li>网站改用HTTPS 以后，由HTTP 跳转到 HTTPS 的方式增加了用户访问耗时（多数网站采用302跳转）</li>
<li>HTTPS 涉及到的安全算法会消耗 CPU 资源，需要增加大量机器（https访问过程需要加解密）</li>
</ol>
<h3 id="4、Nginx-性能优化"><a href="#4、Nginx-性能优化" class="headerlink" title="4、Nginx 性能优化"></a>4、Nginx 性能优化</h3><p>当我需要进行性能优化时，说明我们服务器无法满足日益增长的业务。性能优化是一个比较大的课题，需要从以下几个方面进行探讨</p>
<ul>
<li>当前系统结构瓶颈</li>
<li>了解业务模式</li>
<li>性能与安全</li>
</ul>
<h4 id="4-1-当前系统结构瓶颈"><a href="#4-1-当前系统结构瓶颈" class="headerlink" title="4.1 当前系统结构瓶颈"></a>4.1 当前系统结构瓶颈</h4><p>首先需要了解的是当前系统瓶颈，用的是什么，跑的是什么业务。里面的服务是什么样子，每个服务最大支持多少并发。比如针对Nginx而言，我们处理静态资源效率最高的瓶颈是多大？</p>
<p>可以通过查看当前<code>cpu负荷</code>，<code>内存使用率</code>，<code>进程使用率</code>来做简单判断。还可以通过操作系统的一些工具来判断当前系统性能瓶颈，如分析对应的<code>日志</code>，查看<code>请求数量</code>。也可以通过nginx http_stub_status_module模块来查看对应的<code>连接数</code>，<code>总握手次数</code>，<code>总请求数</code>。也可以对线上进行压力测试，来了解当前的系统的性能，并发数，做好性能评估。</p>
<h4 id="4-2-了解业务模式"><a href="#4-2-了解业务模式" class="headerlink" title="4.2 了解业务模式"></a>4.2 了解业务模式</h4><p>虽然我们是在做性能优化，但还是要熟悉业务，最终目的都是为业务服务的。我们要了解每一个接口业务类型是什么样的业务，比如电子商务抢购模式，这种情况平时流量会很小，但是到了抢购时间，流量一下子就会猛涨。也要了解系统层级结构，每一层在中间层做的是代理还是动静分离，还是后台进行直接服务。需要我们对业务接入层和系统层次要有一个梳理。</p>
<h4 id="4-3-性能与安全"><a href="#4-3-性能与安全" class="headerlink" title="4.3 性能与安全"></a>4.3 性能与安全</h4><p>性能与安全也是一个需要考虑的因素，往往大家注重性能忽略安全或注重安全又忽略性能。比如说我们在设计防火墙时，如果规则过于全面肯定会对性能方面有影响。如果对性能过于注重在安全方面肯定会留下很大隐患。所以大家要评估好两者的关系，把握好两者的孰重孰轻，以及整体的相关性。权衡好对应的点。</p>
<h4 id="4-4-系统与Nginx性能优化"><a href="#4-4-系统与Nginx性能优化" class="headerlink" title="4.4 系统与Nginx性能优化"></a>4.4 系统与Nginx性能优化</h4><p>大家对相关的系统瓶颈及现状有了一定的了解之后，就可以根据影响性能方面做一个全体的评估和优化。</p>
<ul>
<li>网络（网络流量、是否有丢包，网络的稳定性都会影响用户请求）</li>
<li>系统（系统负载、饱和、内存使用率、系统的稳定性、硬件磁盘是否有损坏）</li>
<li>服务（连接优化、内核性能优化、http服务请求优化都可以在nginx中根据业务来进行设置）</li>
<li>程序（接口性能、处理请求速度、每个程序的执行效率）</li>
<li>数据库、底层服务</li>
</ul>
<p>上面列举出来每一级都会有关联，也会影响整体性能，这里主要关注的是Nginx服务这一层。</p>
<h5 id="4-4-1-文件句柄"><a href="#4-4-1-文件句柄" class="headerlink" title="4.4.1 文件句柄"></a>4.4.1 文件句柄</h5><p>在linux/unix操作系统中一切皆文件，我们的设备是文件，文件是文件，文件夹也是文件。当我们用户每发起一次请求，就会产生一个文件句柄。文件句柄可以简单的理解为<code>文件句柄就是一个索引</code>。文件句柄就会随着请求量的增多,进程调用频繁增加，那么产生的文件句柄也就会越多。</p>
<p>系统默认对文件句柄是有限制的，不可能会让一个进程无限制的调用句柄。因为系统资源是有限的，所以我们需要限制每一个服务能够使用多大的文件句柄。操作系统默认使用的文件句柄是1024个句柄。</p>
<h5 id="4-4-2-设置方式"><a href="#4-4-2-设置方式" class="headerlink" title="4.4.2 设置方式"></a>4.4.2 设置方式</h5><ul>
<li>系统全局性修改</li>
<li>用户局部性修改</li>
<li>进程局部性修改</li>
</ul>
<h5 id="4-4-3-系统全局性修改和用户局部性修改"><a href="#4-4-3-系统全局性修改和用户局部性修改" class="headerlink" title="4.4.3 系统全局性修改和用户局部性修改"></a>4.4.3 系统全局性修改和用户局部性修改</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-server ~]# vim /etc/security/limits.conf</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">*               soft    core            0</span></span><br><span class="line"><span class="meta">#</span><span class="bash">*               hard    rss             10000</span></span><br><span class="line"><span class="meta">#</span><span class="bash">@student        hard    nproc           20</span></span><br><span class="line"><span class="meta">#</span><span class="bash">@faculty        soft    nproc           20</span></span><br><span class="line"><span class="meta">#</span><span class="bash">@faculty        hard    nproc           50</span></span><br><span class="line"><span class="meta">#</span><span class="bash">ftp             hard    nproc           0</span></span><br><span class="line"><span class="meta">#</span><span class="bash">@student        -       maxlogins       4</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">root只是针对root这个用户来限制，soft只是发提醒，操作系统不会强制限制,一般的站点设置为一万左右就ok了</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 单个用户配置</span></span><br><span class="line">root soft nofile 65535</span><br><span class="line">root hard nofile 65535</span><br><span class="line">nginx soft nofile 65535</span><br><span class="line">nginx hard nofile 65535</span><br><span class="line"><span class="meta">#</span><span class="bash"> *代表通配符 所有的用户</span></span><br><span class="line">*    soft nofile 25535</span><br><span class="line">*    hard nofile 25535</span><br></pre></td></tr></table></figure>

<p>可以看到<code>root</code>和<code>*</code>，root代表是root用户，*代表的是所有用户，后面的数字就是文件句柄大小。大家可以根据个人业务来进行设置。</p>
<p><strong>4.4.4 进程局部性修改</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-server ~]# vim /etc/nginx/nginx.conf</span><br><span class="line">user  nginx;</span><br><span class="line">worker_processes  1; aut</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log warn;</span><br><span class="line">pid        /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line">worker_rlimit_nofile 65535; #进程限制</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024; #最大连接数</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  '$http_user_agent' '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">                      '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">                      '"$http_user_agent" "$http_x_forwarded_for" '</span><br><span class="line">                      '"$args" "$request_uri"';</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on; </span><br><span class="line">    #tcp_nopush     on; </span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65; </span><br><span class="line"></span><br><span class="line">    #gzip  on; </span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>worker_rlimit_nofile</code> 是在进程上面进行限制。</p>
<p>是用来设置 NGINX 工作进程打开的文件描述符的限制。文件描述符是操作系统用来跟踪已打开文件的一种机制。这个设置用来确保 NGINX 工作进程能够处理足够数量的并发连接和文件操作。<br>要设置合适的 worker_rlimit_nofile，你可以参考以下步骤：<br>了解系统默认限制：首先，了解你的操作系统默认的文件描述符限制。你可以通过命令 <code>ulimit -n</code> 来查看。如果默认值已经足够高，你可能不需要进行额外的设置。<br>考虑 NGINX 的工作负载：根据你的 NGINX 应用程序的工作负载和预期的并发连接数，决定是否需要增加文件描述符的限制。如果你的 NGINX 应用程序会频繁地打开和关闭文件，或者处理大量的并发连接，可能需要增加限制。<br>设置合适的值：根据系统和应用程序的需求，设置一个合适的值。通常情况下，可以将 worker_rlimit_nofile 设置为操作系统默认限制的两倍或者更高，以确保 NGINX 能够处理预期的并发连接和文件操作。但是，不要将其设置得太高以至于超过操作系统的最大限制。<br>例如，如果你的操作系统默认限制是1024，而你的 NGINX 应用程序预期处理的并发连接数较高，你可以将 worker_rlimit_nofile 设置为 1048 或更高。</p>
</li>
<li><p><code>worker_connections</code>是 NGINX 用来限制单个工作进程所能处理的最大并发连接数。</p>
<p>这个设置应该根据你的服务器硬件配置、预期的并发连接数以及 NGINX 所处理的工作负载来进行调整。<br>一般来说，你可以通过以下步骤来设置合适的 worker_connections：<br>了解硬件配置和预期负载：首先要了解你的服务器硬件配置，包括 CPU、内存和网络带宽。另外，需要预估你的网站或应用程序的预期并发连接数。这可以通过历史数据、用户量估算或者负载测试来确定。<br>计算最大并发连接数：结合你的硬件配置和预期负载，可以计算出你的服务器可以支持的最大并发连接数。这个计算并不是精确的，但是可以给你一个大致的指导。<br>设置合适的 worker_connections：根据你的计算结果和 NGINX 的最佳实践，设置 worker_connections。通常来说，这个值应该略高于你预期的并发连接数，以留有一定的余地，但也不要设置得太高以至于超过服务器硬件的承载能力。<br>例如，如果你的服务器配置为4核8线程CPU，16GB内存，预期的并发连接数为1000个，你可以设置 worker_connections 为 1024 或者稍高一些，比如 2048。但是如果你的服务器硬件配置较低，比如双核CPU和较少内存，你可能需要将 worker_connections 设置得更低一些，以避免性能问题。</p>
</li>
</ul>
<h4 id="4-5-cpu的亲和配置"><a href="#4-5-cpu的亲和配置" class="headerlink" title="4.5 cpu的亲和配置"></a>4.5 cpu的亲和配置</h4><p>cpu的亲和能够使nginx对于不同的work工作进程绑定到不同的cpu上面去。就能够减少在work间不断切换cpu，把进程通常不会在处理器之间频繁迁移，进程迁移的频率小，来减少性能损耗。<a href="https://nginx.org/en/docs/ngx_core_module.html#worker_cpu_affinity" target="_blank" rel="noopener">nginx 亲和配置</a></p>
<p>查看cpu核心数 </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-server ~]# cat /proc/cpuinfo|grep "cpu cores"|uniq</span><br></pre></td></tr></table></figure>

<p>查看cpu使用率</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-server ~]#top  回车后按 1</span><br></pre></td></tr></table></figure>

<h5 id="4-5-1-配置worker-processes"><a href="#4-5-1-配置worker-processes" class="headerlink" title="4.5.1 配置worker_processes"></a><strong>4.5.1 配置worker_processes</strong></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-server ~]# vim /etc/nginx/nginx.conf</span><br><span class="line"></span><br><span class="line">将刚才查看到自己cpu * cpu核心就是worker_processes</span><br><span class="line">worker_processes 2; #根据自己cpu核心数配置/这里也可以设置为auto</span><br></pre></td></tr></table></figure>

<p>假设 配置是2cpu，每个cpu是8核，配置如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">worker_processes 16;</span><br><span class="line">worker_cpu_affinity 1010101010101010 0101010101010101;</span><br></pre></td></tr></table></figure>

<p>在nginx 1.9版本之后，就帮我们自动绑定了cpu;</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">worker_cpu_affinity auto;</span><br></pre></td></tr></table></figure>

<h4 id="4-6-nginx通用配置优化"><a href="#4-6-nginx通用配置优化" class="headerlink" title="4.6 nginx通用配置优化"></a><strong>4.6 nginx通用配置优化</strong></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">将nginx进程设置为普通用户，为了安全考虑</span></span><br><span class="line">user nginx; </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">当前启动的worker进程，官方建议是与系统核心数一致</span></span><br><span class="line">worker_processes 2;</span><br><span class="line"><span class="meta">#</span><span class="bash">方式一，就是自动分配绑定</span></span><br><span class="line">worker_cpu_affinity auto;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">日志配置成warn</span></span><br><span class="line">error_log /var/log/nginx/error.log warn; </span><br><span class="line">pid /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">针对 nginx 句柄的文件限制</span></span><br><span class="line">worker_rlimit_nofile 35535; # 或者1024的倍数</span><br><span class="line"><span class="meta">#</span><span class="bash">事件模型</span></span><br><span class="line">events &#123;</span><br><span class="line">    #使用epoll内核模型</span><br><span class="line">    use epoll;</span><br><span class="line">    #每一个进程可以处理多少个连接，如果是多核可以将连接数调高 worker_processes * 1024</span><br><span class="line">    worker_connections 10240;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       /etc/nginx/mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    charset utf-8;  #设置字符集</span><br><span class="line"></span><br><span class="line">    #设置日志输出格式，根据自己的情况设置</span><br><span class="line">    log_format  main  '$http_user_agent' '$remote_addr - $remote_user [$time_local] "$request" '</span><br><span class="line">                      '$status $body_bytes_sent "$http_referer" '</span><br><span class="line">                      '"$http_user_agent" "$http_x_forwarded_for" '</span><br><span class="line">                      '"$args" "$request_uri"';</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    sendfile        on;   #对静态资源的处理比较有效</span><br><span class="line">    #tcp_nopush     on;   #如果做静态资源服务器可以打开</span><br><span class="line"></span><br><span class="line">    keepalive_timeout  65; </span><br><span class="line"></span><br><span class="line">    ########</span><br><span class="line">    #Gzip module</span><br><span class="line">    gzip  on;    #文件压缩默认可以打开</span><br><span class="line"></span><br><span class="line">    include /etc/nginx/conf.d/*.conf;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>tcp_nopush</code> 是一个 NGINX 配置指令，用于控制 TCP 连接的数据传输方式。当设置为 <code>on</code> 时，它告诉 NGINX 在发送 HTTP 响应时尽可能快地发送响应头部，并且在发送响应体时尽量避免发送小数据包，尽量等待更多的数据再发送。这样做可以减少数据包的数量，提高传输效率。</p>
</li>
<li><p><code>sendfile</code> 是一个 NGINX 配置指令，用于控制 NGINX 是否使用 sendfile 系统调用来发送文件。当设置为 <code>on</code> 时，它告诉 NGINX 使用 sendfile 系统调用来直接在内核空间和文件系统之间传输文件，而不需要将文件数据从内核复制到用户空间再发送，这样可以提高文件传输的效率。sendfile 是一种零拷贝（Zero-Copy）技术，它允许操作系统直接从磁盘读取文件并发送到网络，而无需将文件数据在内核空间和用户空间之间复制。这种方法可以减少 CPU 和内存的使用，提高文件传输的效率，并且减少了系统调用的次数。在高负载和高并发的情况下，使用 <code>sendfile on;</code> 可以显著提高 NGINX 的性能和吞吐量。但是，需要注意的是，sendfile 对于小文件的传输可能并不总是最有效的，因为它可能会导致内存碎片和额外的内核开销。总的来说，通常情况下将 <code>sendfile on;</code> 设置为 <code>on</code> 是推荐的做法，特别是在处理大文件和高并发的网络环境下可以提高性能。</p>
</li>
<li><p><code>keepalive_timeout</code> 是 NGINX 的一个配置指令，用于设置 HTTP Keep-Alive 连接的超时时间。HTTP Keep-Alive 是一种机制，它允许客户端和服务器之间的 TCP 连接在处理完一个请求后保持打开状态一段时间，以便在该时间段内发送更多的请求。</p>
<p>当设置 <code>keepalive_timeout</code> 时，你指定了 NGINX 在收到一个 HTTP 请求后，等待客户端发出下一个请求的最长时间。如果在指定的时间内没有收到新的请求，则 NGINX 将关闭该连接。</p>
<p>在高并发的网络环境中，使用 HTTP Keep-Alive 可以减少 TCP 连接的建立和关闭次数，从而降低服务器的负载，并提高客户端和服务器之间的响应速度。</p>
<p>通常来说，将 <code>keepalive_timeout</code> 设置为一个合理的值可以有效地平衡服务器资源和客户端响应时间之间的关系。如果设置得太短，可能会导致客户端频繁地重新建立连接，增加了服务器的负载；而设置得太长，则可能会占用服务器资源，导致服务器无法及时释放不再使用的连接。</p>
<p>根据实际情况，你可以根据以下几点来决定 <code>keepalive_timeout</code> 的值：</p>
<ol>
<li><strong>网站或应用程序的性能需求</strong>：根据你的网站或应用程序的性能需求来调整超时时间。如果你的网站需要快速响应客户端请求，你可能需要将超时时间设置得较短；如果你的网站或应用程序是一个长期交互的应用，你可以将超时时间设置得更长一些。</li>
<li><strong>客户端和网络条件</strong>：考虑客户端和网络条件。如果你的用户处于高延迟或不稳定的网络环境中，你可能需要将超时时间设置得更长，以确保他们有足够的时间发出下一个请求。</li>
<li><strong>服务器资源</strong>：考虑你的服务器资源情况。如果你的服务器资源有限，你可能需要将超时时间设置得较短，以释放不再使用的连接并释放资源。</li>
</ol>
</li>
<li><p><code>gzip on;</code> 是 NGINX 的一个配置指令，用于启用 HTTP 响应内容的压缩功能。当设置为 <code>on</code> 时，NGINX 将会对 HTTP 响应的内容进行压缩，以减小传输过程中的数据量，提高网站的加载速度，并降低网络带宽的使用。</p>
<p>启用 gzip 压缩功能可以带来以下好处：</p>
<ol>
<li><strong>减小文件大小</strong>：通过压缩 HTTP 响应的内容，可以显著减小传输过程中的数据量，尤其对于文本文件（如 HTML、CSS、JavaScript）效果更为明显。</li>
<li><strong>提高网站加载速度</strong>：减小文件大小意味着客户端需要下载的数据量更少，从而可以加快网站的加载速度，改善用户体验。</li>
<li><strong>降低网络带宽的使用</strong>：通过减小传输的数据量，可以降低服务器和网络带宽的使用，节省服务器资源和网络成本。</li>
</ol>
<p>虽然启用 gzip 压缩功能可以提高网站的性能和用户体验，但也需要注意以下几点：</p>
<ul>
<li><strong>CPU 资源消耗</strong>：对内容进行压缩需要消耗一定的 CPU 资源，特别是在高流量的网络环境中，可能会对服务器的 CPU 负载产生一定影响。因此，在启用 gzip 压缩功能时，需要根据服务器的 CPU 资源和实际负载来进行评估和调整。</li>
<li><strong>压缩级别</strong>：NGINX 默认使用适中的压缩级别来平衡压缩比和 CPU 消耗。</li>
</ul>
</li>
</ul>
<h3 id="5、ab接口压力测试工具-扩展"><a href="#5、ab接口压力测试工具-扩展" class="headerlink" title="5、ab接口压力测试工具(扩展)"></a>5、ab接口压力测试工具(扩展)</h3><p>ab是Apache超文本传输协议(HTTP)的性能测试工具。其设计意图是描绘当前所安装的Apache的执行性能，主要是显示你安装的Apache每秒可以处理多少个请求。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-server ~]# yum install httpd-tools -y</span><br><span class="line">[root@nginx-server ~]# ab -n 2000 -c 2 http://127.0.0.1/</span><br><span class="line">-n 总的请求数</span><br><span class="line">-c 并发数</span><br></pre></td></tr></table></figure>

<p><strong>1、参数选项</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">-n：即requests，用于指定压力测试总共的执行次数</span><br><span class="line">-c：即concurrency，用于指定的并发数</span><br><span class="line">-t：即timelimit，等待响应的最大时间(单位：秒)</span><br><span class="line">-b：即windowsize，TCP发送/接收的缓冲大小(单位：字节)</span><br><span class="line">-p：即postfile，发送POST请求时需要上传的文件，此外还必须设置-T参数</span><br><span class="line">-u：即putfile，发送PUT请求时需要上传的文件，此外还必须设置-T参数</span><br><span class="line">-T：即content-type，用于设置Content-Type请求头信息，例如：application/x-www-form-urlencoded，默认值为text/plain</span><br><span class="line">-v：即verbosity，指定打印帮助信息的冗余级别</span><br><span class="line">-w：以HTML表格形式打印结果</span><br><span class="line">-i：使用HEAD请求代替GET请求</span><br><span class="line">-x：插入字符串作为table标签的属性</span><br><span class="line">-y：插入字符串作为tr标签的属性</span><br><span class="line">-z：插入字符串作为td标签的属性</span><br><span class="line">-C：添加cookie信息，例如："Apache=1234"(可以重复该参数选项以添加多个)</span><br><span class="line">-H：添加任意的请求头，例如："Accept-Encoding: gzip"，请求头将会添加在现有的多个请求头之后(可以重复该参数选项以添加多个)</span><br><span class="line">-A：添加一个基本的网络认证信息，用户名和密码之间用英文冒号隔开</span><br><span class="line">-P：添加一个基本的代理认证信息，用户名和密码之间用英文冒号隔开</span><br><span class="line">-X：指定使用的和端口号，例如:"126.10.10.3:88"</span><br><span class="line">-V：打印版本号并退出</span><br><span class="line">-k：使用HTTP的KeepAlive特性</span><br><span class="line">-d：不显示百分比</span><br><span class="line">-S：不显示预估和警告信息</span><br><span class="line">-g：输出结果信息到gnuplot格式的文件中</span><br><span class="line">-e：输出结果信息到CSV格式的文件中</span><br><span class="line">-r：指定接收到错误信息时不退出程序</span><br><span class="line">-H：显示用法信息，其实就是ab -help</span><br></pre></td></tr></table></figure>

<p><strong>2、内容解释</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Server Software:        nginx/1.10.2 (服务器软件名称及版本信息)</span><br><span class="line">Server Hostname:        192.168.1.106(服务器主机名)</span><br><span class="line">Server Port:            80 (服务器端口)</span><br><span class="line"></span><br><span class="line">Document Path:          /index1.html. (供测试的URL路径)</span><br><span class="line">Document Length:        3721 bytes (供测试的URL返回的文档大小)</span><br><span class="line"></span><br><span class="line">Concurrency Level:      1000 (并发数)</span><br><span class="line">Time taken for tests:   2.327 seconds (压力测试消耗的总时间)</span><br><span class="line">Complete requests:      5000 (的总次数)</span><br><span class="line">Failed requests:        688 (失败的请求数)</span><br><span class="line">Write errors:           0 (网络连接写入错误数)</span><br><span class="line">Total transferred:      17402975 bytes (传输的总数据量)</span><br><span class="line">HTML transferred:       16275725 bytes (HTML文档的总数据量)</span><br><span class="line">Requests per second:    2148.98 [#/sec] (mean) (平均每秒的请求数) 这个是非常重要的参数数值，服务器的吞吐量 </span><br><span class="line">Time per request:       465.338 [ms] (mean) (所有并发用户(这里是1000)都请求一次的平均时间)</span><br><span class="line">Time  request:       	0.247 [ms] (mean, across all concurrent requests) (单个用户请求一次的平均时间)</span><br><span class="line">Transfer rate:          7304.41 [Kbytes/sec] received 每秒获取的数据长度 (传输速率，单位：KB/s)</span><br><span class="line">...</span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line"><span class="meta">  50%</span><span class="bash">    347  <span class="comment">## 50%的请求在347ms内返回 </span></span></span><br><span class="line"><span class="meta">  66%</span><span class="bash">    401  <span class="comment">## 60%的请求在401ms内返回 </span></span></span><br><span class="line"><span class="meta">  75%</span><span class="bash">    431</span></span><br><span class="line"><span class="meta">  80%</span><span class="bash">    516</span></span><br><span class="line"><span class="meta">  90%</span><span class="bash">    600</span></span><br><span class="line"><span class="meta">  95%</span><span class="bash">    846</span></span><br><span class="line"><span class="meta">  98%</span><span class="bash">   1571</span></span><br><span class="line"><span class="meta">  99%</span><span class="bash">   1593</span></span><br><span class="line"><span class="meta">  100%</span><span class="bash">   1619 (longest request)</span></span><br></pre></td></tr></table></figure>

<p><strong>3、示例演示</strong></p>
<p>注意事项</p>
<p>● 测试机与被测试机要分开</p>
<p>● 不要对线上的服务器做压力测试</p>
<p>● 观察测试工具ab所在机器，以及被测试的机器的CPU、内存、网络等都不超过最高限度的75%</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@nginx-server ~]# ab -n 50 -c 2 http://www.testpm.cn/</span><br><span class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 1430300 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking www.testpm.cn (be patient).....done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        nginx/1.16.0</span><br><span class="line">Server Hostname:        www.testpm.cn</span><br><span class="line">Server Port:            80</span><br><span class="line"></span><br><span class="line">Document Path:          /</span><br><span class="line">Document Length:        612 bytes</span><br><span class="line"></span><br><span class="line">Concurrency Level:      2</span><br><span class="line">Time taken for tests:   2.724 seconds</span><br><span class="line">Complete requests:      50</span><br><span class="line">Failed requests:        0</span><br><span class="line">Write errors:           0</span><br><span class="line">Total transferred:      42250 bytes</span><br><span class="line">HTML transferred:       30600 bytes</span><br><span class="line">Requests per second:    18.35 [#/sec] (mean)</span><br><span class="line">Time per request:       108.968 [ms] (mean)</span><br><span class="line">Time per request:       54.484 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          15.15 [Kbytes/sec] received</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:       42   52  17.3     46     137</span><br><span class="line">Processing:    43   54  20.8     47     170</span><br><span class="line">Waiting:       42   53  20.7     47     170</span><br><span class="line">Total:         84  106  28.9     93     219</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line"><span class="meta">  50%</span><span class="bash">     93</span></span><br><span class="line"><span class="meta">  66%</span><span class="bash">     96</span></span><br><span class="line"><span class="meta">  75%</span><span class="bash">    101</span></span><br><span class="line"><span class="meta">  80%</span><span class="bash">    130</span></span><br><span class="line"><span class="meta">  90%</span><span class="bash">    153</span></span><br><span class="line"><span class="meta">  95%</span><span class="bash">    161</span></span><br><span class="line"><span class="meta">  98%</span><span class="bash">    219</span></span><br><span class="line"><span class="meta">  99%</span><span class="bash">    219</span></span><br><span class="line"><span class="meta"> 100%</span><span class="bash">    219 (longest request)</span></span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">L66</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://l66stbz.github.io/2024/08/10/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_04/">https://l66stbz.github.io/2024/08/10/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_04/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://l66stbz.github.io" target="_blank">L66</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/Nginx/">Nginx</a></div><div class="post_share"><div class="social-share" data-image="https://l66stbz.github.io/2024/09/07/Jenkins_webhooks自动触发/Jenkins_webhooks自动触发/1.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2024/08/11/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-LVS/"><img class="prev_cover" src="https://l66stbz.github.io/2024/08/11/负载均衡-LVS/1.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">负载均衡-LVS</div></div></a></div><div class="next-post pull_right"><a href="/2024/08/10/nginx%E8%AF%A6%E8%A7%A3+%E5%AE%9E%E6%93%8D_03/"><img class="next_cover" src="https://l66stbz.github.io/2024/08/10/nginx详解+实操_03/1.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">nginx详解+实操_03</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2024/07/05/WEB服务器/" title="WEB服务器"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/07/05/WEB服务器/4.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-07-05</div><div class="relatedPosts_title">WEB服务器</div></div></a></div><div class="relatedPosts_item"><a href="/2024/05/18/Zabbix监控Nginx指标/" title="Zabbix监控Nginx指标"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/18/Zabbix监控Nginx指标/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-18</div><div class="relatedPosts_title">Zabbix监控Nginx指标</div></div></a></div><div class="relatedPosts_item"><a href="/2024/08/09/nginx详解+实操_02/" title="nginx详解+实操_02"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/08/09/nginx详解+实操_02/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-08-09</div><div class="relatedPosts_title">nginx详解+实操_02</div></div></a></div><div class="relatedPosts_item"><a href="/2024/08/10/nginx详解+实操_03/" title="nginx详解+实操_03"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/08/10/nginx详解+实操_03/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-08-10</div><div class="relatedPosts_title">nginx详解+实操_03</div></div></a></div><div class="relatedPosts_item"><a href="/2024/05/24/自动化脚本/" title="自动化脚本"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/24/自动化脚本/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-24</div><div class="relatedPosts_title">自动化脚本</div></div></a></div><div class="relatedPosts_item"><a href="/2024/08/09/nginx详解+实操_01/" title="nginx详解+实操_01"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/08/09/nginx详解+实操_01/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-08-09</div><div class="relatedPosts_title">nginx详解+实操_01</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By L66</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="/js/third-party/click_heart.js"></script></body></html>