<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux存储管理(lvm,swap,raid) | L66</title><meta name="description" content="存储管理一 .存储管理主要知识点:  基本分区、逻辑卷LVM、EXT3&#x2F;4&#x2F;XFS文件系统、RAID 1.1 初识硬盘12机械 HDD固态 SSD  与传统硬盘相比，SSD固态电子盘具有以下优点： 12345第一，SSD不需要机械结构，完全的半导体化，不存在数据查找时间、延迟时间和磁盘寻道时间，数据存取速度快。第二，SSD全部采用闪存芯片，经久耐用，防震抗摔，即使发生与硬物碰撞，数据丢失的可能性也"><meta name="keywords" content="Linux,LVM,Swap,Raid"><meta name="author" content="L66"><meta name="copyright" content="L66"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/3.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Linux存储管理(lvm,swap,raid)"><meta name="twitter:description" content="存储管理一 .存储管理主要知识点:  基本分区、逻辑卷LVM、EXT3&#x2F;4&#x2F;XFS文件系统、RAID 1.1 初识硬盘12机械 HDD固态 SSD  与传统硬盘相比，SSD固态电子盘具有以下优点： 12345第一，SSD不需要机械结构，完全的半导体化，不存在数据查找时间、延迟时间和磁盘寻道时间，数据存取速度快。第二，SSD全部采用闪存芯片，经久耐用，防震抗摔，即使发生与硬物碰撞，数据丢失的可能性也"><meta name="twitter:image" content="https://l66stbz.github.io/2024/07/03/存储管理/8.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Linux存储管理(lvm,swap,raid)"><meta property="og:url" content="https://l66stbz.github.io/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"><meta property="og:site_name" content="L66"><meta property="og:description" content="存储管理一 .存储管理主要知识点:  基本分区、逻辑卷LVM、EXT3&#x2F;4&#x2F;XFS文件系统、RAID 1.1 初识硬盘12机械 HDD固态 SSD  与传统硬盘相比，SSD固态电子盘具有以下优点： 12345第一，SSD不需要机械结构，完全的半导体化，不存在数据查找时间、延迟时间和磁盘寻道时间，数据存取速度快。第二，SSD全部采用闪存芯片，经久耐用，防震抗摔，即使发生与硬物碰撞，数据丢失的可能性也"><meta property="og:image" content="https://l66stbz.github.io/2024/07/03/存储管理/8.jpg"><meta property="article:published_time" content="2024-07-03T13:00:00.000Z"><meta property="article:modified_time" content="2024-07-04T11:49:47.689Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://l66stbz.github.io/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/"><link rel="prev" title="文件服务器" href="https://l66stbz.github.io/2024/07/04/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"><link rel="next" title="作业小合集" href="https://l66stbz.github.io/2024/06/29/%E4%BD%9C%E4%B8%9A%E5%B0%8F%E5%90%88%E9%9B%86/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/gh/radium-bit/res@master/live2d/autoload.js" async></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="L66" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/2.jpg" onerror="onerror=null;src='/img/2.jpg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">54</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">35</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Photo</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#存储管理"><span class="toc-number">1.</span> <span class="toc-text">存储管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#一-存储管理"><span class="toc-number">1.1.</span> <span class="toc-text">一 .存储管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-初识硬盘"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 初识硬盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-从磁盘分区方式区分"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 从磁盘分区方式区分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二-基本分区"><span class="toc-number">1.2.</span> <span class="toc-text">二.基本分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-fdisk"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 fdisk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-gdisk"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 gdisk</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-创建分区"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.2.1 创建分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-创建文件系统（格式化）centos7默认使用xfs"><span class="toc-number">1.2.2.2.</span> <span class="toc-text">2.2.2 创建文件系统（格式化）centos7默认使用xfs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-挂载mount使用"><span class="toc-number">1.2.2.3.</span> <span class="toc-text">2.2.3 挂载mount使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三-fstab开机自动挂载"><span class="toc-number">1.3.</span> <span class="toc-text">三.fstab开机自动挂载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-etc-fstab文件实现开机的时候自动挂载"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1 &#x2F;etc&#x2F;fstab文件实现开机的时候自动挂载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-etc-rc-d-rc-local开机自动挂载"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2 &#x2F;etc&#x2F;rc.d&#x2F;rc.local开机自动挂载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四-文件系统"><span class="toc-number">1.4.</span> <span class="toc-text">四.文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1、文件系统分类"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1、文件系统分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-1分类"><span class="toc-number">1.4.1.0.1.</span> <span class="toc-text">4.1.1分类</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-2概念"><span class="toc-number">1.4.1.0.2.</span> <span class="toc-text">4.1.2概念</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#理解inode"><span class="toc-number">1.4.1.0.2.1.</span> <span class="toc-text">理解inode</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-3-EXT"><span class="toc-number">1.4.1.0.3.</span> <span class="toc-text">4.1.3.EXT</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-4-XFS"><span class="toc-number">1.4.1.0.4.</span> <span class="toc-text">4.1.4.XFS</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、逻辑卷LVM–（Logical-Volume-Manager（逻辑卷管理）的简写）"><span class="toc-number">1.5.</span> <span class="toc-text">五、逻辑卷LVM–（Logical Volume Manager（逻辑卷管理）的简写）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-LVM管理"><span class="toc-number">1.5.1.</span> <span class="toc-text">5.1 LVM管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1-lvm的特点"><span class="toc-number">1.5.1.1.</span> <span class="toc-text">5.1.1 lvm的特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2-lvm"><span class="toc-number">1.5.1.2.</span> <span class="toc-text">5.1.2 lvm</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-lvm的制作"><span class="toc-number">1.5.2.</span> <span class="toc-text">5.2.lvm的制作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-案例"><span class="toc-number">1.5.3.</span> <span class="toc-text">5.3 案例</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-创建LVM"><span class="toc-number">1.5.3.1.</span> <span class="toc-text">5.3.1.创建LVM</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-1-1-创建pv"><span class="toc-number">1.5.3.1.1.</span> <span class="toc-text">5.3.1.1.创建pv</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-1-2-创建vg"><span class="toc-number">1.5.3.1.2.</span> <span class="toc-text">5.3.1.2.创建vg</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-1-3-创建lv"><span class="toc-number">1.5.3.1.3.</span> <span class="toc-text">5.3.1.3.创建lv</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-1-4-制作文件系统并挂载"><span class="toc-number">1.5.3.1.4.</span> <span class="toc-text">5.3.1.4.制作文件系统并挂载</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-LVM逻辑卷扩容"><span class="toc-number">1.5.3.2.</span> <span class="toc-text">5.3.2.LVM逻辑卷扩容</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-2-1-VG管理"><span class="toc-number">1.5.3.2.1.</span> <span class="toc-text">5.3.2.1.VG管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-2-2-扩大VG-vgextend（lv所在vg无空间）"><span class="toc-number">1.5.3.2.2.</span> <span class="toc-text">5.3.2.2.扩大VG vgextend（lv所在vg无空间）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-2-3-实战lv扩容"><span class="toc-number">1.5.3.2.3.</span> <span class="toc-text">5.3.2.3.实战lv扩容</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-2-4-FS-file-system-文件系统扩容（声明文件系统，声明后无需挂载）"><span class="toc-number">1.5.3.2.4.</span> <span class="toc-text">5.3.2.4.FS(file system)文件系统扩容（声明文件系统，声明后无需挂载）</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六-交换分区"><span class="toc-number">1.6.</span> <span class="toc-text">六.交换分区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-引入"><span class="toc-number">1.6.1.</span> <span class="toc-text">6.1 引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-增加交换分区-可以是基本分区，LVM，File"><span class="toc-number">1.6.2.</span> <span class="toc-text">6.2 增加交换分区 可以是基本分区，LVM，File</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1-基本分区增加交换分区-需分区"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">6.2.1 基本分区增加交换分区(需分区)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2-file制作增加交换分区"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">6.2.2 file制作增加交换分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3-lvm增加和扩容交换分区-通过lvm进行增加扩容交换分区可以不分区"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">6.2.3 lvm增加和扩容交换分区(通过lvm进行增加扩容交换分区可以不分区)</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-3-1-lvm增加交换分区"><span class="toc-number">1.6.2.3.1.</span> <span class="toc-text">6.2.3.1 lvm增加交换分区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-3-1-lvm扩容交换分区"><span class="toc-number">1.6.2.3.2.</span> <span class="toc-text">6.2.3.1 lvm扩容交换分区</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七-mount详解"><span class="toc-number">1.7.</span> <span class="toc-text">七.mount详解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八-raid–磁盘阵列"><span class="toc-number">1.8.</span> <span class="toc-text">八.raid–磁盘阵列</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、RAID介绍"><span class="toc-number">1.8.1.</span> <span class="toc-text">1、RAID介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#作用"><span class="toc-number">1.8.1.0.0.1.</span> <span class="toc-text">作用</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#购买磁盘后需要操作"><span class="toc-number">1.8.1.0.1.</span> <span class="toc-text">购买磁盘后需要操作</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://l66stbz.github.io/2024/07/03/存储管理/8.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">L66</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 列表</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Photo</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Linux存储管理(lvm,swap,raid)</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2024-07-03 21:00:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2024-07-03</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2024-07-04 19:49:47"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2024-07-04</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="存储管理"><a href="#存储管理" class="headerlink" title="存储管理"></a>存储管理</h1><h2 id="一-存储管理"><a href="#一-存储管理" class="headerlink" title="一 .存储管理"></a>一 .存储管理</h2><p>主要知识点:  基本分区、逻辑卷LVM、EXT3/4/XFS文件系统、RAID</p>
<h3 id="1-1-初识硬盘"><a href="#1-1-初识硬盘" class="headerlink" title="1.1 初识硬盘"></a>1.1 初识硬盘</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">机械 HDD</span><br><span class="line">固态 SSD</span><br></pre></td></tr></table></figure>

<p><strong>与传统硬盘相比，SSD固态电子盘具有以下优点：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第一，SSD不需要机械结构，完全的半导体化，不存在数据查找时间、延迟时间和磁盘寻道时间，数据存取速度快。</span><br><span class="line">第二，SSD全部采用闪存芯片，经久耐用，防震抗摔，即使发生与硬物碰撞，数据丢失的可能性也能够降到最小。　　</span><br><span class="line">第三，得益于无机械部件及闪存芯片，SSD没有任何噪音，功耗低。　</span><br><span class="line">第四，质量轻，比常规1.8英寸硬盘重量轻20-30克，使得便携设备搭载多块SSD成为可能。同时因其完全半导体化</span><br><span class="line">无结构限制，可根据实际情况设计成各种不同接口、形状的特殊电子硬盘。</span><br></pre></td></tr></table></figure>

<p><strong>硬盘设备命名</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">物理硬盘：    /dev/sd[a-z]</span><br><span class="line">KVM虚拟化:</span><br><span class="line">/dev/vd[a-z]（半虚拟化驱动）</span><br><span class="line">/dev/sd[a-z]（全虚拟化驱动）</span><br></pre></td></tr></table></figure>

<p><strong>HP服务器硬盘</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/dev/cciss/c0d0p1	    //c0第一个控制器, d0第一块磁盘, p1分区1</span><br><span class="line">/dev/cciss/c0d0p2	    //c0第一个控制器, d0第一块磁盘, p2分区2</span><br></pre></td></tr></table></figure>

<p><strong>从存储连接方式</strong>（注意：后期还会学到不同的存储方式）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">本地存储 例如DellR730本地磁盘</span><br><span class="line">外部存储 scsi线 sata线 sas线</span><br><span class="line">网络存储 以太网络(iscsi, glusterFS,ceph) 分布式</span><br></pre></td></tr></table></figure>

<h3 id="1-2-从磁盘分区方式区分"><a href="#1-2-从磁盘分区方式区分" class="headerlink" title="1.2 从磁盘分区方式区分"></a>1.2 从磁盘分区方式区分</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MBR (MSDOS根据分区表来分区的，又叫做主引导扇区) &lt;2TB </span><br><span class="line">分区工具：fdisk  </span><br><span class="line">一共可以分14个分区（4个主分区，扩展分区，逻辑分区） 例如: 3主 + 1扩展（n逻辑）</span><br><span class="line">MBR 小于2TB的可以。</span><br><span class="line">一块硬盘最多分4个主分区。</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GPT 无限制</span><br><span class="line">分区工具：gdisk(parted---rhel6)</span><br><span class="line">一共可以分128个主分区</span><br><span class="line">GPT大于小于2TB都可以。</span><br><span class="line"><span class="meta">#</span><span class="bash">注意：从MBR转到GPT，或从GPT转换到MBR会导致数据全部丢失！无法恢复！</span></span><br></pre></td></tr></table></figure>

<h2 id="二-基本分区"><a href="#二-基本分区" class="headerlink" title="二.基本分区"></a>二.基本分区</h2><p>首先需要给虚拟机添加一块新的硬盘，在VMware的虚拟机设置中即可添加，在添加前要先将虚拟机关机。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ll /dev/sd*</span><br><span class="line">brw-rw----. 1 root disk 8,  0 Nov  7 23:15 /dev/sda</span><br><span class="line">brw-rw----. 1 root disk 8,  1 Nov  7 23:15 /dev/sda1</span><br><span class="line">brw-rw----. 1 root disk 8,  2 Nov  7 23:15 /dev/sda2</span><br><span class="line">brw-rw----. 1 root disk 8, 16 Nov  7 23:15 /dev/sdb</span><br><span class="line">brw-rw----. 1 root disk 8, 32 Nov  7 23:15 /dev/sdc</span><br><span class="line">[root@localhost ~]# lsblk  #查看磁盘设备</span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk </span><br><span class="line">├─sda1            8:1    0    1G  0 part /boot</span><br><span class="line">└─sda2            8:2    0   19G  0 part </span><br><span class="line">  ├─centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  └─centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0   10G  0 disk </span><br><span class="line">sdc               8:32   0    8G  0 disk</span><br></pre></td></tr></table></figure>

<h3 id="2-1-fdisk"><a href="#2-1-fdisk" class="headerlink" title="2.1 fdisk"></a>2.1 fdisk</h3><p>MBR   14个分区（4个主分区，扩展分区，逻辑分区）</p>
<p><strong><img src="/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/1.png" class></strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# fdisk -l /dev/sdb #查看磁盘分区信息</span><br></pre></td></tr></table></figure>

<p><strong><img src="/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/2.png" class></strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> lsblk 查看分区结果</span></span><br><span class="line">【如果分区后无法发现分区结果，请&#123;刷新分区表&#125;后再次查看】</span><br><span class="line"><span class="meta">#</span><span class="bash"> partprobe /dev/sdb</span></span><br></pre></td></tr></table></figure>

<p>为什么起始扇区一定要默认呢？</p>
<p>因为如果间隔起始的话，会导致前后两端的数据无法连接，会导致资源的浪费。</p>
<p><strong><img src="/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/3.png" class></strong></p>
<h3 id="2-2-gdisk"><a href="#2-2-gdisk" class="headerlink" title="2.2 gdisk"></a>2.2 gdisk</h3><p>GPT  128个主分区</p>
<h4 id="2-2-1-创建分区"><a href="#2-2-1-创建分区" class="headerlink" title="2.2.1 创建分区"></a>2.2.1 创建分区</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# yum -y install gdisk  #安装分区工具</span><br><span class="line">[root@qfedu.com ~]# gdisk -l /dev/sdb</span><br><span class="line">[root@qfedu.com ~]# gdisk /dev/sdb</span><br></pre></td></tr></table></figure>

<p><strong><img src="/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/4.png" class></strong></p>
<h4 id="2-2-2-创建文件系统（格式化）centos7默认使用xfs"><a href="#2-2-2-创建文件系统（格式化）centos7默认使用xfs" class="headerlink" title="2.2.2 创建文件系统（格式化）centos7默认使用xfs"></a>2.2.2 创建文件系统（格式化）centos7默认使用xfs</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# mkfs.ext4 /dev/sdb1   #格式化成ext4格式的文件系统</span><br><span class="line">[root@qfedu.com ~]# mkfs.xfs /dev/sdc2   #格式化成xfs格式的文件系统(/采用的就是这种)</span><br></pre></td></tr></table></figure>

<p>操作完成后可以通过blkid命令查看文件系统类型，从而得知是否操作成功。直接回车可以看到所有的硬盘分区UUID和文件系统类型，后面加路径可以只查看指定的分区信息。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# blkid </span><br><span class="line">/dev/sdb1: UUID="e215e902-de80-4f9c-bae7-97ac00711653" TYPE="xfs" </span><br><span class="line">/dev/sda1: UUID="1cd22a94-6aa7-4a09-9c88-0de73436eec1" TYPE="xfs" </span><br><span class="line">/dev/sda2: UUID="lGZ1F3-RJoN-P1dh-jbYG-x8Da-YZrR-fgFZcW" TYPE="LVM2_member" </span><br><span class="line">/dev/sr0: UUID="2020-11-04-11-36-43-00" LABEL="CentOS 7 x86_64" TYPE="iso9660" PTTYPE="dos" </span><br><span class="line">/dev/mapper/centos-root: UUID="6c9250c6-060f-4bc5-9d5c-0059a85113a4" TYPE="xfs" </span><br><span class="line">/dev/mapper/centos-swap: UUID="6fd8ee45-7416-42ca-8422-8ddcf81e5e91" TYPE="swap" </span><br><span class="line">[root@localhost ~]# blkid /dev/sdb1 </span><br><span class="line">/dev/sdb1: UUID="e215e902-de80-4f9c-bae7-97ac00711653" TYPE="xfs"</span><br></pre></td></tr></table></figure>

<h4 id="2-2-3-挂载mount使用"><a href="#2-2-3-挂载mount使用" class="headerlink" title="2.2.3 挂载mount使用"></a>2.2.3 挂载mount使用</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# mkdir /mnt/disk1   #创建挂载目录</span><br><span class="line">[root@qfedu.com ~]# mkdir /mnt/disks   #创建挂载目录</span><br><span class="line">[root@qfedu.com ~]# mount -o rw /dev/sdb1 /mnt/disk1/  #-o 指定读写权限（ro只读，rx读写）</span><br><span class="line">mount参数:</span><br><span class="line">-o 指定读写权限</span><br><span class="line">-a 需要定义(/etc/fstab)执行-a才会自动挂载</span><br><span class="line">[root@qfedu.com ~]# mount /dev/sdc2 /mnt/disks/</span><br></pre></td></tr></table></figure>

<p><strong>查看磁盘挂载与磁盘使用空间</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# df -Th</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root xfs        17G  1.2G   16G   7% /</span><br><span class="line">devtmpfs                devtmpfs  982M     0  982M   0% /dev</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M   0% /dev/shm</span><br><span class="line">tmpfs                   tmpfs     993M  8.7M  984M   1% /run</span><br><span class="line">tmpfs                   tmpfs     993M     0  993M   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1               xfs      1014M  125M  890M  13% /boot</span><br><span class="line">tmpfs                   tmpfs     199M     0  199M   0% /run/user/0</span><br><span class="line">/dev/sdb1               ext4      283M  2.1M  262M   1% /mnt/disk1</span><br><span class="line">/dev/sdc2               xfs       197M   11M  187M   6% /mnt/disks</span><br><span class="line">参数解释：</span><br><span class="line">-T  打印文件系统类型</span><br><span class="line">-h 人性化显示，磁盘空间大小</span><br><span class="line">文件系统会占用一些空间</span><br></pre></td></tr></table></figure>

<p><strong>取消挂载</strong></p>
<p>后跟挂载设备和挂载点都可以</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# umount /mnt/disks/</span><br><span class="line">[root@qfedu.com ~]# umount -l /mnt/disk1/ #强行卸载，即使目录有资源被进程占用，也可以卸载</span><br></pre></td></tr></table></figure>

<h2 id="三-fstab开机自动挂载"><a href="#三-fstab开机自动挂载" class="headerlink" title="三.fstab开机自动挂载"></a>三.fstab开机自动挂载</h2><h3 id="3-1-etc-fstab文件实现开机的时候自动挂载"><a href="#3-1-etc-fstab文件实现开机的时候自动挂载" class="headerlink" title="3.1 /etc/fstab文件实现开机的时候自动挂载"></a>3.1 /etc/fstab文件实现开机的时候自动挂载</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# blkid /dev/sdb1  #查看uuid和文件系统类型</span><br><span class="line">/dev/sdb1: UUID="d1916638-bd0a-4474-8051-f788116a3a92" TYPE="ext4"</span><br><span class="line">[root@qfedu.com ~]# vim /etc/fstab</span><br><span class="line">参数解释：</span><br><span class="line">第1列:挂载设备</span><br><span class="line">(1)/dev/sda5  </span><br><span class="line">(2)UUID=设备的uuid(设备ID号)   rhel6/7的默认写法   同一台机器内唯一的一个设备标识</span><br><span class="line">第2列:挂载点</span><br><span class="line">第3列:文件系统类型</span><br><span class="line">第4列:文件系统属性	</span><br><span class="line">第5列:是否对文件系统进行磁带备份：0 不备份</span><br><span class="line">第6列:是否检查文件系统：0 不检查</span><br></pre></td></tr></table></figure>

<p><strong><img src="/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/5.png" class></strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# vim /etc/fstab</span><br><span class="line">/dev/sdc2       /mnt/disks      xfs     defaults        0 0</span><br><span class="line">[root@qfedu.com ~]# reboot  #重启之后df -Th可以看到已经自动挂载成功</span><br></pre></td></tr></table></figure>

<h3 id="3-2-etc-rc-d-rc-local开机自动挂载"><a href="#3-2-etc-rc-d-rc-local开机自动挂载" class="headerlink" title="3.2 /etc/rc.d/rc.local开机自动挂载"></a>3.2 /etc/rc.d/rc.local开机自动挂载</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这个配置文件会在用户登陆之前读取，这个文件中写入了什么命令，在每次系统启动时都会执行一次。也就是说，如果有任何需要在系统启动时运行的工作，则只需写入 /etc/rc.d/rc.local 配置文件即可。写入/etc/rc.local 配置文件也可以，两者之间是软链接的关系。</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# vim /etc/rc.d/rc.local #将挂载命令直接写到文件中</span><br></pre></td></tr></table></figure>

<p><strong><img src="/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/6.png" class></strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# chmod a+x /etc/rc.d/rc.local #所有用户添加执行权限</span><br><span class="line">[root@qfedu.com ~]# reboot  #重启之后df -Th可以看到已经自动挂载成功</span><br></pre></td></tr></table></figure>

<p>注：用户家目录下的.bashrc文件中也可以，但root以外的用户要确保其有使用mount命令的权限，以及文件的执行权限。</p>
<h2 id="四-文件系统"><a href="#四-文件系统" class="headerlink" title="四.文件系统"></a>四.文件系统</h2><h3 id="4-1、文件系统分类"><a href="#4-1、文件系统分类" class="headerlink" title="4.1、文件系统分类"></a>4.1、文件系统分类</h3><h5 id="4-1-1分类"><a href="#4-1-1分类" class="headerlink" title="4.1.1分类"></a>4.1.1分类</h5><p>问题：为什么有这么多文件系统？一个不够用吗？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">分类：</span><br><span class="line">本地文件系统，不能在网络上用。</span><br><span class="line">ntfs  xfs  ext2，ext3，ext4</span><br><span class="line">网络文件系统，也可以在本地用。(比如网吧)</span><br><span class="line">nfs   glusterfs   hdfs   ceph</span><br></pre></td></tr></table></figure>

<h5 id="4-1-2概念"><a href="#4-1-2概念" class="headerlink" title="4.1.2概念"></a>4.1.2概念</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">作用：</span><br><span class="line">管理文件的一套系统。</span><br><span class="line">文件的编辑，拷贝，粘贴，移动。</span><br><span class="line">inode ：inoed块、i节点--索引节点。专门存储inode信息。里面是文件的属性信息-也叫元信息，文件名,权限，访问时间</span><br></pre></td></tr></table></figure>

<p>存取不分割，放进去什么样，拿出来什么样。存储分割</p>
<h6 id="理解inode"><a href="#理解inode" class="headerlink" title="理解inode"></a>理解inode</h6><blockquote>
<p>理解inode，要从文件储存说起。</p>
<p>文件储存在硬盘上，硬盘的最小存储单位叫做”扇区”（Sector）。每个扇区储存512字节（相当于0.5KB）。</p>
<p>操作系统读取硬盘的时候，不会一个个扇区地读取，这样效率太低，而是一次性连续读取多个扇区，即一次性读取一个”块”（block）。这种由多个扇区组成的”块”，是文件存取的最小单位。”块”的大小，最常见的是4KB，即连续八个 sector组成一个 block。</p>
<p>文件数据都储存在”块”中，那么很显然，我们还必须找到一个地方储存文件的元信息，比如文件的创建者、文件的创建日期、文件的大小等等。这种储存文件元信息的区域就叫做inode，中文译名为”索引节点”。索引节点编号；它是文件或目录在磁盘里的唯一标识，linux读取文件首先要读取到这个索引节点。</p>
<p>每一个文件都有对应的inode，里面包含了与该文件有关的一些信息。</p>
</blockquote>
<p><strong>inode的内容</strong></p>
<blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">文件的字节数</span><br><span class="line">文件拥有者的User ID</span><br><span class="line">文件的Group ID</span><br><span class="line">文件的读、写、执行权限</span><br><span class="line">文件的时间戳，共有三个：ctime指inode上一次变动的时间，mtime指文件内容上一次变动的时间，atime指文件上一次打开的时间。</span><br><span class="line">链接数，即有多少文件名指向这个inode</span><br><span class="line">文件数据block的位置</span><br></pre></td></tr></table></figure>
</blockquote>
<p>查看inode信息</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@qfedu.com ~]# stat /etc/hosts</span><br><span class="line">  File: ‘/etc/hosts’</span><br><span class="line">  Size: 158             Blocks: 8          IO Block: 4096   regular file</span><br><span class="line">Device: fd00h/64768d    Inode: 16778306    Links: 1</span><br><span class="line">Access: (0644/-rw-r--r--)  Uid: (    0/    root)   Gid: (    0/    root)</span><br><span class="line">Access: 2020-07-28 19:11:48.781000069 +0800</span><br><span class="line">Modify: 2013-06-07 22:31:32.000000000 +0800</span><br><span class="line">Change: 2020-07-18 15:37:52.353025437 +0800</span><br><span class="line"> Birth: -</span><br><span class="line"> </span><br><span class="line">[root@qfedu.com ~]# ls -i /etc/hosts  #-i：查看inode号</span><br><span class="line">16778306 /etc/hosts</span><br></pre></td></tr></table></figure>

<h5 id="4-1-3-EXT"><a href="#4-1-3-EXT" class="headerlink" title="4.1.3.EXT"></a>4.1.3.EXT</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">EXT 家族支持度最广：</span><br><span class="line">但创建文件系统（格式化）慢！</span><br><span class="line">修复慢！</span><br><span class="line">文件系统存储容量有限！</span><br></pre></td></tr></table></figure>

<h5 id="4-1-4-XFS"><a href="#4-1-4-XFS" class="headerlink" title="4.1.4.XFS"></a>4.1.4.XFS</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">XFS 同样是一种日志式文件系統：</span><br><span class="line">高容量，支持大存储</span><br><span class="line">高性能，创建/修复文件系统快</span><br><span class="line">格式化快</span><br><span class="line">inode 与 block 都是系統需要用到時，才动态配置产生</span><br></pre></td></tr></table></figure>



<h2 id="五、逻辑卷LVM–（Logical-Volume-Manager（逻辑卷管理）的简写）"><a href="#五、逻辑卷LVM–（Logical-Volume-Manager（逻辑卷管理）的简写）" class="headerlink" title="五、逻辑卷LVM–（Logical Volume Manager（逻辑卷管理）的简写）"></a>五、逻辑卷LVM–（Logical Volume Manager（逻辑卷管理）的简写）</h2><h3 id="5-1-LVM管理"><a href="#5-1-LVM管理" class="headerlink" title="5.1 LVM管理"></a>5.1 LVM管理</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lvm概念：LVM是Linux环境中对磁盘分区进行管理的一种机制，是建立在硬盘和分区之上、文件系统之下的一个逻辑层，可提高磁盘分区管理的灵活性。</span><br><span class="line">卷：卷在Windows系统当中其实也就是我们平常所谓的C盘D盘等等。那么到底什么是卷呢？只要经历过分区和格式化的就可以叫卷。</span><br></pre></td></tr></table></figure>

<h4 id="5-1-1-lvm的特点"><a href="#5-1-1-lvm的特点" class="headerlink" title="5.1.1 lvm的特点"></a>5.1.1 lvm的特点</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">传统分区的缺点:</span></span><br><span class="line">传统的文件系统是基于分区的，一个文件系统对应一个分区。这种方式比较直观，但不易改变。当一个分区空间已满时，无法对其扩充，只能采用重新分区／建立文件系统，非常麻烦；或把分区中的数据移到另一个更大的分区中。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">当采用LVM时：</span></span><br><span class="line">1.将硬盘的多个分区由LVM统一为卷组管理，可以方便的加入或移走分区以扩大或减小卷组的可用容量，充分利用硬盘空间；</span><br><span class="line">2.文件系统建立在LVM上，可以跨分区，方便使用；</span><br><span class="line">3.当系统空间不足而加入新的硬盘时，不必把用户的数据从原硬盘迁移到新硬盘，而只须把新的分区加入卷组并扩充逻辑卷即可。</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">使用LVM主要是方便管理、增加了系统的扩展性。可以跨分区，多个硬盘组合。</span></span><br></pre></td></tr></table></figure>

<h4 id="5-1-2-lvm"><a href="#5-1-2-lvm" class="headerlink" title="5.1.2 lvm"></a>5.1.2 lvm</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1.lvm的制作</span><br><span class="line">2.lvm的使用</span><br><span class="line">3.lvm扩容-------在线扩容。可以在有数据的情况下去扩容。</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本分区(MBR|GPT) ----&gt; Filesystem（制作文件系统类型） ----&gt; mount（挂载）</span><br><span class="line">逻辑卷LVM ----&gt; Filesystem（制作文件系统类型） ----&gt; mount（挂载）</span><br></pre></td></tr></table></figure>

<h3 id="5-2-lvm的制作"><a href="#5-2-lvm的制作" class="headerlink" title="5.2.lvm的制作"></a>5.2.lvm的制作</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">第一步，拥有基本分区</span><br><span class="line">做成物理卷： pv ------- sdb1、sdb2 打pv的标记。</span><br><span class="line">加入卷组：  vg-------- 卷组里面包含：sdb1  sdb2,建立在PV之上。</span><br><span class="line">逻辑卷   lv  -------  逻辑卷是从卷组里面拿空间出来做成的逻辑卷,在起个名,建立在VG之上</span><br><span class="line">制作文件系统------mkfs.xfs    lvm路径</span><br><span class="line">挂载 ------mount   使用lvm   #扩容逻辑卷时不需要挂载</span><br><span class="line"><span class="meta">#</span><span class="bash">制作lvm的时候可以是一整块硬盘也可以是硬盘分好的区并且是还没有用的。必须是没有做文件系统的</span></span><br></pre></td></tr></table></figure>

<p><strong><img src="/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/7.png" class></strong></p>
<h3 id="5-3-案例"><a href="#5-3-案例" class="headerlink" title="5.3 案例"></a>5.3 案例</h3><h4 id="5-3-1-创建LVM"><a href="#5-3-1-创建LVM" class="headerlink" title="5.3.1.创建LVM"></a>5.3.1.创建LVM</h4><p><strong>首先准备添加3块磁盘：可以是/dev/sdb这种没有分区的也可以是/dev/sdb1这种已经分区了的</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意：如果没有pv命令安装 #yum install -y lvm2</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# ll /dev/sd*   #或者直接lsblk直接查看</span><br><span class="line">brw-rw----. 1 root disk 8,  0 Nov  9 12:59 /dev/sda</span><br><span class="line">brw-rw----. 1 root disk 8,  1 Nov  9 12:59 /dev/sda1</span><br><span class="line">brw-rw----. 1 root disk 8,  2 Nov  9 12:59 /dev/sda2</span><br><span class="line">brw-rw----. 1 root disk 8, 16 Nov  9 12:59 /dev/sdb</span><br><span class="line">brw-rw----. 1 root disk 8, 32 Nov  9 12:59 /dev/sdc</span><br><span class="line">brw-rw----. 1 root disk 8, 48 Nov  9 14:04 /dev/sdd</span><br></pre></td></tr></table></figure>

<h5 id="5-3-1-1-创建pv"><a href="#5-3-1-1-创建pv" class="headerlink" title="5.3.1.1.创建pv"></a>5.3.1.1.创建pv</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# pvcreate /dev/sdb #创建pv</span><br><span class="line">  Physical volume "/dev/sdb" successfully created.</span><br><span class="line">[root@linux-server ~]# pvs  #查看pv</span><br><span class="line">  PV         VG     Fmt  Attr PSize   PFree </span><br><span class="line">  /dev/sdb          lvm2 ---   10.00g 10.00g</span><br><span class="line">[root@linux-server ~]# pvscan  #查看pv</span><br><span class="line">  PV /dev/sda2   VG centos          lvm2 [&lt;19.00 GiB / 0    free]</span><br><span class="line">  PV /dev/sdb                       lvm2 [10.00 GiB]</span><br><span class="line">  Total: 2 [&lt;29.00 GiB] / in use: 1 [&lt;19.00 GiB] / in no VG: 1 [10.00 GiB]</span><br></pre></td></tr></table></figure>

<h5 id="5-3-1-2-创建vg"><a href="#5-3-1-2-创建vg" class="headerlink" title="5.3.1.2.创建vg"></a>5.3.1.2.创建vg</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# vgcreate vg1 /dev/sdb   #创建vg</span><br><span class="line">  Volume group "vg1" successfully created</span><br><span class="line">参数解释：</span><br><span class="line">-s 16M 指的是在分区的时候指定vg的大小。</span><br><span class="line">[root@linux-server ~]# vgs    #查看vg</span><br><span class="line">  VG     #PV #LV #SN Attr   VSize   VFree  </span><br><span class="line">  centos   1   2   0 wz--n- &lt;19.00g      0 </span><br><span class="line">  vg1      1   0   0 wz--n- &lt;10.00g &lt;10.00g</span><br><span class="line">[root@linux-server ~]# vgscan</span><br><span class="line">  Reading volume groups from cache.</span><br><span class="line">  Found volume group "centos" using metadata type lvm2</span><br><span class="line">  Found volume group "vg1" using metadata type lvm2</span><br><span class="line">[root@linux-server ~]# vgdisplay #查看vg</span><br><span class="line">--- Volume group ---</span><br><span class="line">  VG Name               vg1</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  2</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                1</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               &lt;10.00 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              2559</span><br><span class="line">  Alloc PE / Size       0 / 0 MiB</span><br><span class="line">  Free  PE / Size       2559 / &lt;10.00 GiB</span><br><span class="line">  VG UUID               bVvQxe-4M2A-mMuk-b3gJ-4Maj-0xDy-5QZDOp</span><br></pre></td></tr></table></figure>

<h5 id="5-3-1-3-创建lv"><a href="#5-3-1-3-创建lv" class="headerlink" title="5.3.1.3.创建lv"></a>5.3.1.3.创建lv</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# lvcreate -L 150M -n lv1 vg1  #创建lv</span><br><span class="line">  Rounding up size to full physical extent 152.00 MiB</span><br><span class="line">  Logical volume "lv1" created.</span><br><span class="line">[root@linux-server ~]# lvcreate -l 20 -n lv2 vg1  #采用PE方式在创建一个lv</span><br><span class="line">  Logical volume "lv2" created.</span><br><span class="line">参数解释：</span><br><span class="line">-L 指定lv的大小(常规单位M,G)</span><br><span class="line">-n 给创建的lv起一个名字</span><br><span class="line">-l 20 指定PE </span><br><span class="line">[root@linux-server ~]# lvs   #查看lv</span><br><span class="line">  LV   VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  root centos -wi-ao---- &lt;17.00g                                                    </span><br><span class="line">  swap centos -wi-ao----   2.00g                                                    </span><br><span class="line">  lv1  vg1    -wi-a----- 152.00m                                                    </span><br><span class="line">  lv2  vg1    -wi-a-----  80.00m</span><br></pre></td></tr></table></figure>

<h5 id="5-3-1-4-制作文件系统并挂载"><a href="#5-3-1-4-制作文件系统并挂载" class="headerlink" title="5.3.1.4.制作文件系统并挂载"></a>5.3.1.4.制作文件系统并挂载</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# mkfs.xfs /dev/vg1/lv1    #xfs格式文件系统</span><br><span class="line">[root@linux-server ~]# mkfs.ext4 /dev/vg1/lv2   #ext4格式文件系统</span><br><span class="line">[root@linux-server ~]# mkdir /mnt/lv&#123;1..2&#125;</span><br><span class="line">[root@linux-server ~]# mount /dev/vg1/lv1 /mnt/lv1</span><br><span class="line">[root@linux-server ~]# mount /dev/vg1/lv2 /mnt/lv2</span><br><span class="line">[root@linux-server ~]# df -Th</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg1-lv1     xfs       149M  7.8M  141M   6% /mnt/lv1</span><br><span class="line">/dev/mapper/vg1-lv2     ext4       74M  1.6M   67M   3% /mnt/lv2</span><br><span class="line"><span class="meta">#</span><span class="bash">注：在lv1中写入文件666.txt，查看666.txt可以看到其内容。挂载后的lv1目录有自己分区，不属于/。取消挂载后里边的666.txt将消失，因为他属于lv1目录的分区。取消挂载后的lv1目录属于/下。</span></span><br></pre></td></tr></table></figure>

<h4 id="5-3-2-LVM逻辑卷扩容"><a href="#5-3-2-LVM逻辑卷扩容" class="headerlink" title="5.3.2.LVM逻辑卷扩容"></a>5.3.2.LVM逻辑卷扩容</h4><h5 id="5-3-2-1-VG管理"><a href="#5-3-2-1-VG管理" class="headerlink" title="5.3.2.1.VG管理"></a>5.3.2.1.VG管理</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">注意：如果lv所在的vg有空间直接扩容lv就ok了！大致流程为：lvextend扩容--&gt;声明文件系统(要与扩容之前的文件系统一致，可以通过lbkid命令查看文件类型)  切记扩容lv在声明过文件系统后无需再次挂载！</span></span><br></pre></td></tr></table></figure>

<h5 id="5-3-2-2-扩大VG-vgextend（lv所在vg无空间）"><a href="#5-3-2-2-扩大VG-vgextend（lv所在vg无空间）" class="headerlink" title="5.3.2.2.扩大VG vgextend（lv所在vg无空间）"></a>5.3.2.2.扩大VG vgextend（lv所在vg无空间）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">1.创建pv</span><br><span class="line">[root@linux-server ~]# pvcreate /dev/sdc </span><br><span class="line">  Physical volume "/dev/sdc" successfully created.</span><br><span class="line">2.直接vgextend扩容</span><br><span class="line">[root@linux-server ~]# vgextend vg1 /dev/sdc       #vg1卷组名字，将/dev/sdc扩展到vg1中</span><br><span class="line">  Volume group "vg1" successfully extended</span><br><span class="line">[root@linux-server ~]# vgs</span><br><span class="line">  VG     #PV #LV #SN Attr   VSize   VFree </span><br><span class="line">  centos   1   2   0 wz--n- &lt;19.00g     0 </span><br><span class="line">  vg1      2   2   0 wz--n-  19.99g 18.23g</span><br></pre></td></tr></table></figure>

<h5 id="5-3-2-3-实战lv扩容"><a href="#5-3-2-3-实战lv扩容" class="headerlink" title="5.3.2.3.实战lv扩容"></a>5.3.2.3.实战lv扩容</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# vgs  #查看vg</span><br><span class="line">  VG     #PV #LV #SN Attr   VSize   VFree </span><br><span class="line">  centos   1   2   0 wz--n- &lt;19.00g     0 </span><br><span class="line">  vg1      1   2   0 wz--n- &lt;19.99g &lt;9.77g</span><br><span class="line">[root@linux-server ~]# lvextend -L 850M /dev/vg1/lv1  #扩展到850M</span><br><span class="line">[root@linux-server ~]# lvextend -L +850M /dev/vg1/lv1 #在原有基础上加850M</span><br><span class="line">[root@linux-server ~]# lvs</span><br><span class="line">  LV   VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  root centos -wi-ao---- &lt;17.00g                                                    </span><br><span class="line">  swap centos -wi-ao----   2.00g                                                    </span><br><span class="line">  lv1  vg1    -wi-ao----   1.66g                                                    </span><br><span class="line">  lv2  vg1    -wi-ao----  80.00m </span><br><span class="line">[root@linux-server ~]# lvextend -l +15 /dev/vg1/lv1 #在原有基础上加15个PE(在想直接用完剩下所有内存的时候用PE比较方便，用-L的话不能准确知道剩下多少空间)</span><br><span class="line">[root@linux-server ~]# lvs</span><br><span class="line">  LV   VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  root centos -wi-ao---- &lt;17.00g                                                    </span><br><span class="line">  swap centos -wi-ao----   2.00g                                                    </span><br><span class="line">  lv1  vg1    -wi-ao----  &lt;1.68g                                                    </span><br><span class="line">  lv2  vg1    -wi-ao----  80.00m</span><br></pre></td></tr></table></figure>

<h5 id="5-3-2-4-FS-file-system-文件系统扩容（声明文件系统，声明后无需挂载）"><a href="#5-3-2-4-FS-file-system-文件系统扩容（声明文件系统，声明后无需挂载）" class="headerlink" title="5.3.2.4.FS(file system)文件系统扩容（声明文件系统，声明后无需挂载）"></a>5.3.2.4.FS(file system)文件系统扩容（声明文件系统，声明后无需挂载）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# df -Th</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg1-lv1     xfs       149M  7.8M  141M   6% /mnt/lv1</span><br><span class="line">/dev/mapper/vg1-lv2     ext4       74M  1.6M   67M   3% /mnt/lv2</span><br><span class="line">[root@linux-server ~]# xfs_growfs /dev/vg1/lv1  #xfs扩容(声明文件系统，与之前一致)</span><br><span class="line">[root@linux-server ~]# resize2fs /dev/vg1/lv2   #ext4扩容(声明文件系统，与之前一致)</span><br><span class="line">[root@linux-server ~]# df -Th</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg1-lv1     xfs       1.7G  9.1M  1.7G   1% /mnt/lv1</span><br><span class="line">/dev/mapper/vg1-lv2     ext4       74M  1.6M   67M   3% /mnt/lv2</span><br></pre></td></tr></table></figure>

<h2 id="六-交换分区"><a href="#六-交换分区" class="headerlink" title="六.交换分区"></a>六.交换分区</h2><p><strong>交换分区管理 Swap—也叫虚拟内存</strong></p>
<p><strong>作用： ‘提升‘ 内存的容量，防止OOM（Out Of Memory）</strong></p>
<h3 id="6-1-引入"><a href="#6-1-引入" class="headerlink" title="6.1 引入"></a>6.1 引入</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">现象是当内存不够的时候内核会随机杀死进程，它认为占用内存多的进程。（内核会先删除占用内存多的进程）.</span><br><span class="line"></span><br><span class="line">如何制作交换分区？</span><br><span class="line"><span class="meta">#</span><span class="bash">我们可以将硬盘空间拿来当作内存来用</span></span><br><span class="line">什么时候用到交换分区？</span><br><span class="line"><span class="meta">#</span><span class="bash">当物理内存不够用的时候使用swap分区，防止物理内存耗尽</span></span><br></pre></td></tr></table></figure>

<p><strong>扩展知识</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">swap分区大小设置规则</span><br><span class="line">在Linux系统，我们可以参照Redhat公司为RHEL5、RHEL6推荐的SWAP空间的大小划分原则，在你没有其他特别需求时，可以作为很好的参考依据。</span><br><span class="line">内存小于4GB时，推荐不少于2GB的swap空间；</span><br><span class="line">内存4GB~16GB，推荐不少于4GB的swap空间；</span><br><span class="line">内存16GB~64GB，推荐不少于8GB的swap空间；</span><br><span class="line">内存64GB~256GB，推荐不少于16GB的swap空间。</span><br></pre></td></tr></table></figure>

<p><strong>查看当前的交换分区</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# free -m </span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:           1984         155        1679           8         149        1656</span><br><span class="line">Swap:          2047           0        2047</span><br><span class="line">[root@linux-server ~]# swapon -s  #查看交换分区信息</span><br></pre></td></tr></table></figure>

<h3 id="6-2-增加交换分区-可以是基本分区，LVM，File"><a href="#6-2-增加交换分区-可以是基本分区，LVM，File" class="headerlink" title="6.2 增加交换分区 可以是基本分区，LVM，File"></a>6.2 增加交换分区 可以是基本分区，LVM，File</h3><h4 id="6-2-1-基本分区增加交换分区-需分区"><a href="#6-2-1-基本分区增加交换分区-需分区" class="headerlink" title="6.2.1 基本分区增加交换分区(需分区)"></a>6.2.1 基本分区增加交换分区(需分区)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# fdisk /dev/sdd  #分一个主分区出来</span><br><span class="line">[root@linux-server ~]# partprobe /dev/sdd #刷新分区表</span><br><span class="line">[root@linux-server ~]# ll /dev/sdd*</span><br><span class="line">brw-rw----. 1 root disk 8, 16 Nov  9 14:11 /dev/sdd</span><br><span class="line">brw-rw----. 1 root disk 8, 17 Nov  9 14:11 /dev/sdd1</span><br></pre></td></tr></table></figure>

<p><strong>初始化</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# mkswap /dev/sdd1  #初始化</span><br><span class="line">Setting up swapspace version 1, size = 5242876 KiB</span><br><span class="line">no label, UUID=d2fd3bc0-10c0-4aeb-98ea-6b640d29b783</span><br></pre></td></tr></table></figure>

<p><strong>挂载</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# blkid /dev/sdd1  #查看UUID</span><br><span class="line">/dev/sdd1: UUID="d2fd3bc0-10c0-4aeb-98ea-6b640d29b783" TYPE="swap" </span><br><span class="line">[root@linux-server ~]# vim /etc/fstab  #制作开机挂载</span><br><span class="line">/dev/sdd1       swap    swap    defaults        0 0</span><br><span class="line">[root@linux-server ~]# swapon -a #激活swap分区(读取/etc/fstab)</span><br><span class="line">[root@linux-server ~]# swapon -s</span><br><span class="line">Filename                                Type            Size    Used    Priority</span><br><span class="line">/dev/dm-1                               partition       2097148 0       -1</span><br><span class="line">/dev/sdd1                               partition       5242876 0       -2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">swapoff /dev/sdd1  <span class="comment">#关闭swap分区</span></span></span><br></pre></td></tr></table></figure>

<h4 id="6-2-2-file制作增加交换分区"><a href="#6-2-2-file制作增加交换分区" class="headerlink" title="6.2.2 file制作增加交换分区"></a>6.2.2 file制作增加交换分区</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# dd if=/dev/zero of=/swap2.img bs=1M count=512</span><br><span class="line">解释：dd 读入  从空设备里面拿空块 到交换分区                块多大  一共多少兆</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="keyword">if</span> 参数指定了 dd 命令的输入文件。在这里，/dev/zero 是一个特殊的设备文件，它提供无限的零（null）字节流。这意味着 dd 将从 /dev/zero 中读取无限的零字节作为输入数据。如果你想将 /dev/zero 替换为其他文件，理论上是可以的，但需要考虑替换文件的内容和大小，以确保满足你的需求。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">/swap2.img 是指将输出写入到一个根下名为 swap2.img 的文件中。如果路径中没有指定目录，则会将文件创建在当前工作目录下,命名无限制</span></span><br><span class="line">[root@linux-server ~]# mkswap /swap2.img  #初始化</span><br><span class="line">[root@linux-server ~]# vim /etc/fstab</span><br><span class="line">/swap2.img      swap    swap    defaults        0 0</span><br><span class="line">[root@linux-server ~]# chmod 600 /swap2.img #交换分区权限需要设置为600，默认644权限不安全。但是不设置600权限也照样可以实现</span><br><span class="line">[root@linux-server ~]# swapon -a</span><br><span class="line">[root@linux-server ~]# swapon -s</span><br><span class="line">Filename                                Type            Size    Used    Priority</span><br><span class="line">/dev/dm-1                               partition       2097148 0       -1</span><br><span class="line">/dev/sdd1                               partition       5242876 0       -2</span><br><span class="line">/swap2.img                              file    524284  0       -3</span><br></pre></td></tr></table></figure>

<h4 id="6-2-3-lvm增加和扩容交换分区-通过lvm进行增加扩容交换分区可以不分区"><a href="#6-2-3-lvm增加和扩容交换分区-通过lvm进行增加扩容交换分区可以不分区" class="headerlink" title="6.2.3 lvm增加和扩容交换分区(通过lvm进行增加扩容交换分区可以不分区)"></a>6.2.3 lvm增加和扩容交换分区(通过lvm进行增加扩容交换分区可以不分区)</h4><h5 id="6-2-3-1-lvm增加交换分区"><a href="#6-2-3-1-lvm增加交换分区" class="headerlink" title="6.2.3.1 lvm增加交换分区"></a>6.2.3.1 lvm增加交换分区</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# fdisk /dev/sde </span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line"></span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：N</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (1 primary, 0 extended, 3 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): P</span><br><span class="line">分区号 (2-4，默认 2)：2</span><br><span class="line">起始 扇区 (27265024-41943039，默认为 27265024)：</span><br><span class="line">将使用默认值 27265024</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (27265024-41943039，默认为 41943039)：+3G  </span><br><span class="line">分区 2 已设置为 Linux 类型，大小设为 3 GiB</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：W</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">正在同步磁盘。</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# pvcreate /dev/sde2</span><br><span class="line">  Physical volume "/dev/sde2" successfully created.</span><br><span class="line">[root@localhost ~]# vgs</span><br><span class="line">  VG     #PV #LV #SN Attr   VSize  VFree   </span><br><span class="line">  VG1      2   1   0 wz--n-  1.99g       0 </span><br><span class="line">  VG2      1   1   0 wz--n- &lt;2.00g       0 </span><br><span class="line">  centos   2   2   0 wz--n- 31.99g 1020.00m</span><br><span class="line">[root@localhost ~]# vgcreate VG3 /dev/sde2 </span><br><span class="line">  Volume group "VG3" successfully created</span><br><span class="line">[root@localhost ~]# vgdisplay VG3</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               VG3</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        1</span><br><span class="line">  Metadata Sequence No  1</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                0</span><br><span class="line">  Open LV               0</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                1</span><br><span class="line">  Act PV                1</span><br><span class="line">  VG Size               &lt;3.00 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              767</span><br><span class="line">  Alloc PE / Size       0 / 0   </span><br><span class="line">  Free  PE / Size       767 / &lt;3.00 GiB</span><br><span class="line">  VG UUID               sU3LsS-h8aU-xzSe-uGWx-TFmU-hWPA-b0G50Z</span><br><span class="line">[root@localhost ~]# lvcreate -n LV3 -l 767 VG3</span><br><span class="line">  Logical volume "LV3" created.</span><br><span class="line">[root@localhost ~]# lvs</span><br><span class="line">  LV   VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  LV1  VG1    -wi-a-----   1.99g                                                    </span><br><span class="line">  LV2  VG2    -wi-a-----  &lt;2.00g                                                    </span><br><span class="line">  LV3  VG3    -wi-a-----  &lt;3.00g                                                    </span><br><span class="line">  root centos -wi-ao---- &lt;29.00g                                                    </span><br><span class="line">  swap centos -wi-ao----   2.00g                                                        </span><br><span class="line">[root@localhost ~]# mkswap /dev/VG3/LV3 </span><br><span class="line">正在设置交换空间版本 1，大小 = 3141628 KiB</span><br><span class="line">无标签，UUID=971f0251-22dd-4636-8dab-b38aaa04faa2</span><br><span class="line">[root@localhost ~]# free -m</span><br><span class="line">[root@localhost ~]# vi /etc/fstab </span><br><span class="line">/dev/VG3/LV3  swap                    swap    defaults        0 0</span><br><span class="line">[root@localhost ~]# swapon -a</span><br><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972         195         632           7         143         633</span><br><span class="line">Swap:          5115           0        5115</span><br></pre></td></tr></table></figure>

<h5 id="6-2-3-1-lvm扩容交换分区"><a href="#6-2-3-1-lvm扩容交换分区" class="headerlink" title="6.2.3.1 lvm扩容交换分区"></a>6.2.3.1 lvm扩容交换分区</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972         187         181           7         602         635</span><br><span class="line">Swap:          4607           0        4607</span><br><span class="line">[root@localhost ~]# fdisk /dev/sdd</span><br><span class="line">欢迎使用 fdisk (util-linux 2.23.2)。</span><br><span class="line"></span><br><span class="line">更改将停留在内存中，直到您决定将更改写入磁盘。</span><br><span class="line">使用写入命令前请三思。</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table</span><br><span class="line">使用磁盘标识符 0x05584ff8 创建新的 DOS 磁盘标签。</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：n</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default p): p</span><br><span class="line">分区号 (1-4，默认 1)：1</span><br><span class="line">起始 扇区 (2048-10485759，默认为 2048)：</span><br><span class="line">将使用默认值 2048</span><br><span class="line">Last 扇区, +扇区 or +size&#123;K,M,G&#125; (2048-10485759，默认为 10485759)：+3G</span><br><span class="line">分区 1 已设置为 Linux 类型，大小设为 3 GiB</span><br><span class="line"></span><br><span class="line">命令(输入 m 获取帮助)：w</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line">正在同步磁盘。</span><br><span class="line">[root@localhost ~]# lsblk </span><br><span class="line">NAME            MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT</span><br><span class="line">sda               8:0    0   20G  0 disk </span><br><span class="line">├─sda1            8:1    0    1G  0 part /boot</span><br><span class="line">└─sda2            8:2    0   19G  0 part </span><br><span class="line">  ├─centos-root 253:0    0   17G  0 lvm  /</span><br><span class="line">  └─centos-swap 253:1    0    2G  0 lvm  [SWAP]</span><br><span class="line">sdb               8:16   0    6G  0 disk </span><br><span class="line">└─sdb1            8:17   0    1G  0 part </span><br><span class="line">sdc               8:32   0    5G  0 disk </span><br><span class="line">└─sdc1            8:33   0    2G  0 part [SWAP]</span><br><span class="line">sdd               8:48   0    5G  0 disk </span><br><span class="line">└─sdd1            8:49   0    3G  0 part </span><br><span class="line">sr0              11:0    1  4.4G  0 rom  </span><br><span class="line">[root@localhost ~]# pvcreate /dev/sdd1 </span><br><span class="line">  Physical volume "/dev/sdd1" successfully created.</span><br><span class="line">[root@localhost ~]# vgextend centos /dev/sdd1</span><br><span class="line">  Volume group "centos" successfully extended</span><br><span class="line">[root@localhost ~]# vgs</span><br><span class="line">  VG     #PV #LV #SN Attr   VSize  VFree </span><br><span class="line">  centos   2   2   0 wz--n- 21.99g &lt;3.00g</span><br><span class="line">[root@localhost ~]# vgdisplay centos</span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               centos</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  4</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               2</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               21.99 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              5630</span><br><span class="line">  Alloc PE / Size       4863 / &lt;19.00 GiB</span><br><span class="line">  Free  PE / Size       767 / &lt;3.00 GiB</span><br><span class="line">  VG UUID               Hq2Jqj-nGM7-9hNZ-q5ET-76Ua-1yfL-AckFzL</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# lvextend -l +767 /dev/centos/swap </span><br><span class="line">  Size of logical volume centos/swap changed from 2.00 GiB (512 extents) to &lt;5.00 GiB (1279 extents).</span><br><span class="line">  Logical volume centos/swap successfully resized.</span><br><span class="line">[root@localhost ~]# lvs</span><br><span class="line">  LV   VG     Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br><span class="line">  root centos -wi-ao---- &lt;17.00g                                                    </span><br><span class="line">  swap centos -wi-ao----  &lt;5.00g                                                    </span><br><span class="line">[root@localhost ~]# mkswap /dev/centos/swap </span><br><span class="line">mkswap: error: /dev/centos/swap is mounted; will not make swapspace  #需要把swap关掉</span><br><span class="line">[root@localhost ~]# swapoff -a</span><br><span class="line">[root@localhost ~]# mkswap /dev/centos/swap  #声明</span><br><span class="line">mkswap: /dev/centos/swap: warning: wiping old swap signature.</span><br><span class="line">正在设置交换空间版本 1，大小 = 5238780 KiB</span><br><span class="line">无标签，UUID=3a297574-beea-4dc0-b072-49ad4ccdd944</span><br><span class="line">[root@localhost ~]# swapon -a</span><br><span class="line">swapon: /ldq：不安全的权限 0644，建议使用 0600。</span><br><span class="line">[root@localhost ~]# free -m</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:            972         196         655           7         120         642</span><br><span class="line">Swap:          7675           0        7675</span><br></pre></td></tr></table></figure>

<h2 id="七-mount详解"><a href="#七-mount详解" class="headerlink" title="七.mount详解"></a>七.mount详解</h2><p>*<em>常用挂载选项详解 *</em></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">挂载设备文件名、UUID</span><br></pre></td></tr></table></figure>

<p><strong>常见的挂载选项</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-o         指定文件系统属性</span><br><span class="line">rw	       读写 </span><br><span class="line">ro	       只读 </span><br><span class="line">noexec	   不允许执行二进制文件</span><br><span class="line">exec	   允许执行二进制文件 </span><br><span class="line">auto	   mount -a 开机自动挂载 </span><br><span class="line">remount	   在线重新挂载</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# mount  #查看已经挂载上的系统的属性</span><br></pre></td></tr></table></figure>

<p><strong>案例1：exec/noexec</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# mount /dev/vg1/lv1 /mnt/lv1/		#挂载默认是有执行权限的</span><br><span class="line">[root@linux-server ~]# mount -o noexec /dev/vg1/lv2 /mnt/lv2  #不允许执行二进制文件</span><br><span class="line">[root@linux-server ~]# cat /mnt/lv1/hello.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo "hello"</span><br><span class="line">[root@linux-server ~]# cat /mnt/lv2/hello2.sh</span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">echo "hello"</span><br><span class="line">[root@linux-server ~]# chmod +x /mnt/lv1/hello.sh </span><br><span class="line">[root@linux-server ~]# chmod +x /mnt/lv2/hello2.sh</span><br><span class="line">[root@linux-server ~]# /mnt/lv1/hello.sh</span><br><span class="line">hello</span><br><span class="line">[root@linux-server ~]# /mnt/lv2/hello2.sh</span><br><span class="line">-bash: /mnt/lv2/hello2.sh: Permission denied</span><br></pre></td></tr></table></figure>

<p><strong>取消挂载</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@linux-server ~]# df -Th</span><br><span class="line">Filesystem              Type      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/vg1-lv1     xfs       1.7G   34M  1.7G   2% /mnt/lv1</span><br><span class="line">/dev/mapper/vg1-lv2     ext4       74M  1.6M   67M   3% /mnt/lv2</span><br><span class="line">[root@linux-server ~]# umount /mnt/lv2/</span><br></pre></td></tr></table></figure>

<h2 id="八-raid–磁盘阵列"><a href="#八-raid–磁盘阵列" class="headerlink" title="八.raid–磁盘阵列"></a>八.raid–磁盘阵列</h2><h3 id="1、RAID介绍"><a href="#1、RAID介绍" class="headerlink" title="1、RAID介绍"></a>1、RAID介绍</h3><p>主观备份叫备份  被动备份叫冗余</p>
<p>RAID （ Redundant Array of Independent Disks ）即独立磁盘冗余阵列，通常简称为磁盘阵列。简单地说， RAID 是由多个独立的高性能磁盘驱动器组成的磁盘子系统，从而提供比单个磁盘更高的存储性能和数据冗余的技术。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">注意</span></span><br><span class="line">所有服务器在安装操作系统之前必须先做raid【常识】</span><br></pre></td></tr></table></figure>

<h6 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">为什么要做raid？ #为了保证数据完整性，防止数据丢失</span><br></pre></td></tr></table></figure>

<p><strong>最常用的raid级别:0、1、5、6、10:是 1和0 的组合</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">raid0 ---数据条带卷</span><br><span class="line">最少需要两块磁盘，分别往每一块磁盘上写一部分数据</span><br><span class="line">优点:</span><br><span class="line">1.读写速度快， </span><br><span class="line">2.磁盘利用率：100%</span><br><span class="line">缺点:不提供数据冗余，无数据检验，不能保证数据的正确性，存在单点故障。</span><br><span class="line"></span><br><span class="line">应用场景：</span><br><span class="line">1）对数据完整性要求不高的场景，如：日志存储，个人娱乐</span><br><span class="line">2）要求读写效率高，安全性能要求不高，如图像工作站 </span><br><span class="line"><span class="meta">#</span><span class="bash">范例：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">两块盘A和B   存数据123456   一块存123 一块存456</span></span><br><span class="line">============================================================================</span><br><span class="line">两个盘存相同数据</span><br><span class="line">raid1 又叫镜像raid，通过磁盘数据镜像实现数据冗余，在成对的独立磁盘上产生互为备份的数据。</span><br><span class="line">一般需要两块磁盘，每块磁盘上都会存储一份完整数据。其数据安全性就会较高，但是磁盘空间利用率是比较低的。</span><br><span class="line"></span><br><span class="line">优点:提供数据冗余，数据双倍存储安全性高支持容错。读速度快</span><br><span class="line">缺点:写速度不变，无数据校验。磁盘利用率不高</span><br><span class="line">磁盘利用率：50%</span><br><span class="line"></span><br><span class="line">应用场景：</span><br><span class="line">存放重要数据，如数据存储领域</span><br><span class="line"><span class="meta">#</span><span class="bash">范例：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">两块盘A和B   存数据123456   一块存123456 令一块也存123456</span></span><br><span class="line">===========================================================</span><br><span class="line">raid5：RAID5应该是目前最常见的 RAID 等级，它的校验数据分布在阵列中的所有磁盘上。RAID5的磁盘上同时存储数据和校验数据。当一个数据盘损坏时，系统可以根据其他数据块和对应的校验数据来重建损坏的数据。　</span><br><span class="line"></span><br><span class="line">raid5最少需要3块磁盘。</span><br><span class="line">优点:</span><br><span class="line">1.可以找回丢失的数据---数据可以通过校验计算得出，</span><br><span class="line">2.冗余磁盘--&gt;（需要4快磁盘将其中一块做热备）当某一块磁盘坏掉后，冗余磁盘会自动替换上去</span><br><span class="line">3.有校验机制</span><br><span class="line">4.读写速度高</span><br><span class="line">5.磁盘利用率高</span><br><span class="line">缺点：</span><br><span class="line">1.磁盘越多安全性能越差</span><br><span class="line"></span><br><span class="line">应用场景：安全性高，如金融、数据库、存储等。</span><br><span class="line"><span class="meta">#</span><span class="bash">范例：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">三块盘A、B和C   存数据123456   A存123 B存456 C存校验码 当A或B当中一块坏掉，可以通过另一块中的数据和校验码算出坏掉那块中的数据。</span></span><br><span class="line">==================================================</span><br><span class="line">raid6：RAID6 等级是在 RAID5 的基础上为了进一步增强数据保护而设计的一种 RAID 方式。</span><br><span class="line">最少需要四块磁盘，两块存校验位。RAID6引入双重校验的概念，它可以保护阵列中同时出现两个磁盘失效时，阵列仍能够继续工作，不会发生数据丢失。</span><br><span class="line">优点：</span><br><span class="line">1.容错：允许两块磁盘同时坏掉。读写快。</span><br><span class="line">2.良好的随机读性能</span><br><span class="line">3.有校验机制</span><br><span class="line"></span><br><span class="line">缺点：</span><br><span class="line">1.写入速度差</span><br><span class="line">2.成本高</span><br><span class="line"></span><br><span class="line">应用场景：对数据安全级别要求比较高的企业</span><br><span class="line"><span class="meta">#</span><span class="bash">范例：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">四块盘A、B、C和D   存数据123456   一块存123 一块存456 另外两块存校验码 两块数据盘同时丢也可以继续工作</span></span><br><span class="line">===============================================</span><br><span class="line">RAID10：先做镜像再作条带--也叫混合raid</span><br><span class="line">优点：</span><br><span class="line">1.较高的IO性能</span><br><span class="line">2.有数据冗余</span><br><span class="line">3.无单点故障</span><br><span class="line">4.安全性能高</span><br><span class="line">缺点：成本稍高</span><br><span class="line">应用场景：</span><br><span class="line">特别适用于既有大量数据需要存取，同时又对数据安全性要求严格的领域，如银行、金融、商业超市、仓储库房、各种档案管理等。</span><br><span class="line"><span class="meta">#</span><span class="bash">范例：</span></span><br><span class="line"><span class="meta">#</span><span class="bash">四块盘A、B、C和D   存数据123456   A和B为一组，C和D为一组，一组存123，一组存456，组内两块存相同数据和raid1一样，这样只要不是同时坏掉两块为同一组的硬盘就不会出问题。</span></span><br><span class="line">=======================================================</span><br></pre></td></tr></table></figure>

<h5 id="购买磁盘后需要操作"><a href="#购买磁盘后需要操作" class="headerlink" title="购买磁盘后需要操作"></a>购买磁盘后需要操作</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.有磁盘,2.制作raid5,3.开始分区,4.刷新分区表,5，制作文件系统,6.挂载。</span></span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">L66</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://l66stbz.github.io/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/">https://l66stbz.github.io/2024/07/03/%E5%AD%98%E5%82%A8%E7%AE%A1%E7%90%86/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://l66stbz.github.io" target="_blank">L66</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/LVM/">LVM</a><a class="post-meta__tags" href="/tags/Swap/">Swap</a><a class="post-meta__tags" href="/tags/Raid/">Raid</a></div><div class="post_share"><div class="social-share" data-image="https://l66stbz.github.io/2024/09/07/Jenkins_webhooks自动触发/Jenkins_webhooks自动触发/1.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2024/07/04/%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8/"><img class="prev_cover" src="https://l66stbz.github.io/2024/07/04/文件服务器/8.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">文件服务器</div></div></a></div><div class="next-post pull_right"><a href="/2024/06/29/%E4%BD%9C%E4%B8%9A%E5%B0%8F%E5%90%88%E9%9B%86/"><img class="next_cover" src="https://l66stbz.github.io/2024/06/29/作业小合集/1.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">作业小合集</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2024/05/23/基础测试脚本题/" title="基础测试脚本题"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/23/基础测试脚本题/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-23</div><div class="relatedPosts_title">基础测试脚本题</div></div></a></div><div class="relatedPosts_item"><a href="/2024/05/15/2024.05随记/" title="2024.05随记"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/15/2024.05随记/66.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-15</div><div class="relatedPosts_title">2024.05随记</div></div></a></div><div class="relatedPosts_item"><a href="/2024/07/31/Linux内核升级/" title="Linux内核升级"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/07/31/Linux内核升级/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-07-31</div><div class="relatedPosts_title">Linux内核升级</div></div></a></div><div class="relatedPosts_item"><a href="/2024/07/27/Mysql高可用-MHA/" title="Mysql高可用-MHA"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/07/27/Mysql高可用-MHA/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-07-27</div><div class="relatedPosts_title">Mysql高可用-MHA</div></div></a></div><div class="relatedPosts_item"><a href="/2024/08/16/RabbitMQ消息队列/" title="RabbitMQ消息队列"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/08/16/RabbitMQ消息队列/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-08-16</div><div class="relatedPosts_title">RabbitMQ消息队列</div></div></a></div><div class="relatedPosts_item"><a href="/2024/05/21/Keepalived/" title="Keepalived"><img class="relatedPosts_cover" src="https://l66stbz.github.io/2024/05/21/Keepalived/1.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2024-05-21</div><div class="relatedPosts_title">Keepalived</div></div></a></div></div><div class="clear_both"></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By L66</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script><script src="/js/third-party/click_heart.js"></script></body></html>